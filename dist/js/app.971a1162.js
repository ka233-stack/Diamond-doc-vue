(function(e){function t(t){for(var a,r,i=t[0],c=t[1],l=t[2],d=0,m=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&m.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(m.length)m.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(a=!1)}a&&(o.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},s={app:0},o=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("85ec"),s=n.n(a);s.a},"0426":function(e,t,n){"use strict";var a=n("14c6"),s=n.n(a);s.a},"0aae":function(e,t,n){e.exports=n.p+"img/lg_backsrc.23f49d10.png"},"0b09":function(e,t,n){e.exports=n.p+"img/logowhite.3155a7a1.png"},"0bb0":function(e,t){e.exports="data:image/png;base64,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"},"0c14":function(e,t,n){e.exports=n.p+"img/shot3.0d759a85.png"},1047:function(e,t,n){"use strict";var a=n("c6f2"),s=n.n(a);s.a},"11ec":function(e,t,n){},"14c6":function(e,t,n){},"15df":function(e,t,n){"use strict";var a=n("9d28"),s=n.n(a);s.a},"1f3e":function(e,t,n){e.exports=n.p+"img/shot4.7fb0729e.png"},4462:function(e,t,n){"use strict";var a=n("960b"),s=n.n(a);s.a},"4ffd":function(e,t,n){e.exports=n.p+"img/logo.85a06b71.png"},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=(n("0fae"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)}),o=[],r={name:"app"},i=r,c=(n("034f"),n("2877")),l=Object(c["a"])(i,s,o,!1,null,null,null),u=l.exports,d=n("8c4f"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("img",{staticClass:"background",attrs:{src:n("0aae"),alt:"background"}}),a("el-header",[a("div",{staticClass:"welcomebtn",on:{click:e.gotoWelcome}},[a("div",{attrs:{id:"bars"}}),a("div",{attrs:{id:"bars"}}),a("div",{attrs:{id:"bars"}})]),a("div",{attrs:{id:"triangle"}})]),a("el-main",[a("div",{staticClass:"login_box"},[a("div",{staticClass:"loginTitle"},[a("div",{attrs:{id:"block_outer"}}),a("div",{attrs:{id:"block_inner"}}),a("h2",[e._v("登录")]),a("div",{attrs:{id:"block_outer"}}),a("div",{attrs:{id:"block_inner"}})]),a("div",{staticClass:"loginForm"},[a("el-form",{ref:"loginFormRef",staticClass:"login_form",attrs:{model:e.loginForm,rules:e.loginFormRules,"label-width":"0px"}},[a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-user",placeholder:"用户名"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-lock",type:"password",placeholder:"密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),a("el-form-item",[a("el-button",{staticClass:"login_btn",on:{click:e.login}},[e._v("登录")])],1)],1)],1),a("div",{staticClass:"registerPropt"},[a("div",[e._v("没有账号？")]),a("div",[a("el-button",{staticClass:"register_btn",on:{click:e.gotoRegister}},[a("span",[e._v("立即注册")])])],1)])])])],1)},p=[],g=(n("96cf"),n("1da1")),h={data:function(){return{loginForm:{username:"",password:""},loginFormRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符",trigger:"blur"}]}}},created:function(){this.checkLogin()},methods:{login:function(){var e=this;this.$refs.loginFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(n){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("/login/",e.loginForm);case 4:a=t.sent,s=a.data,"登录失败"===s?e.$message.error(s):(window.sessionStorage.setItem("token",s),e.$message.success("登陆成功"),e.$router.push("/dashboard"));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},gotoWelcome:function(){this.$router.push("/")},gotoRegister:function(){this.$router.push("/register")},checkLogin:function(){null!==window.sessionStorage.getItem("token")&&this.$router.push("/dashboard")}}},f=h,v=(n("e9a4"),Object(c["a"])(f,m,p,!1,null,"5217793e",null)),w=v.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("img",{staticClass:"background",attrs:{src:n("65df"),alt:"background"}}),a("el-header",[a("div",{staticClass:"welcomebtn",on:{click:e.gotoWelcome}},[a("div",{attrs:{id:"bars"}}),a("div",{attrs:{id:"bars"}}),a("div",{attrs:{id:"bars"}})]),a("div",{attrs:{id:"triangle"}})]),a("el-main",[a("div",{staticClass:"register_box"},[a("div",{staticClass:"registerTitle"},[a("div",{attrs:{id:"block_outer"}}),a("div",{attrs:{id:"block_inner"}}),a("h2",[e._v("注册")]),a("div",{attrs:{id:"block_outer"}}),a("div",{attrs:{id:"block_inner"}})]),a("div",{staticClass:"registerForm"},[a("el-form",{ref:"registerFormRef",staticClass:"register_form",attrs:{model:e.registerForm,rules:e.registerFormRules,"label-width":"0px"}},[a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-user",placeholder:"用户名"},model:{value:e.registerForm.username,callback:function(t){e.$set(e.registerForm,"username",t)},expression:"registerForm.username"}})],1),a("el-form-item",{attrs:{prop:"email"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-message",type:"email",placeholder:"邮箱"},model:{value:e.registerForm.email,callback:function(t){e.$set(e.registerForm,"email",t)},expression:"registerForm.email"}})],1),a("el-form-item",{attrs:{prop:"password1"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-lock",type:"password",placeholder:"密码"},model:{value:e.registerForm.password1,callback:function(t){e.$set(e.registerForm,"password1",t)},expression:"registerForm.password1"}})],1),a("el-form-item",{attrs:{prop:"password2"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-lock",type:"password",placeholder:"确认密码"},model:{value:e.registerForm.password2,callback:function(t){e.$set(e.registerForm,"password2",t)},expression:"registerForm.password2"}})],1),a("el-form-item",[a("el-button",{staticClass:"register_btn",on:{click:e.register}},[e._v("注册")])],1)],1)],1),a("div",{staticClass:"loginPropt"},[a("div",[e._v("已有帐号？")]),a("div",[a("el-button",{staticClass:"login_btn",attrs:{type:"primary"},on:{click:e.gotoLogin}},[e._v("立即登录")])],1)])])])],1)},k=[],I={data:function(){var e=this,t=function(t,n,a){n!==e.registerForm.password1?a(new Error("两次输入密码不一致!")):a()},n=function(e,t,n){var a=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/;a.test(t)?n():n(new Error("请输入合法的邮箱"))};return{registerForm:{username:"",email:"",password1:"",password2:""},registerFormRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:n,trigger:"blur"}],password1:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符",trigger:"blur"}],password2:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符",trigger:"blur"},{validator:t,trigger:"blur"}]}}},methods:{register:function(){var e=this;this.$refs.registerFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(n){var a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return a={username:e.registerForm.username,password:e.registerForm.password1,email:e.registerForm.email,image:"/image/avatar.png"},t.next=5,e.$http.post("/register/",a);case 5:s=t.sent,o=s.data,"用户名已存在"===o||"邮箱已存在"===o?e.$message.error(o):(window.sessionStorage.setItem("token",o),e.$message.success("注册成功"),e.$router.push("/dashboard"));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},gotoWelcome:function(){this.$router.push("/")},gotoLogin:function(){this.$router.push("/login")}}},x=I,D=(n("b0c3"),Object(c["a"])(x,b,k,!1,null,"becc6ff2",null)),_=D.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("img",{staticClass:"background",attrs:{src:n("ad64"),alt:"background"}}),a("div",{staticClass:"navbar"},[a("div",{staticClass:"title"},[a("img",{staticClass:"name1",attrs:{src:n("c843"),alt:"name2"}}),a("img",{staticClass:"logo",attrs:{src:n("4ffd"),alt:"logo"}}),a("img",{staticClass:"name2",attrs:{src:n("84ca"),alt:"name3"}})]),a("div",{staticClass:"buttons"},[e.hasLogin?e._e():a("el-button",{staticClass:"navbtn",on:{click:e.register}},[e._v("注册")]),e.hasLogin?e._e():a("el-button",{staticClass:"navbtn",on:{click:e.login}},[e._v("登录")]),e.hasLogin?a("el-button",{staticClass:"navbtn",on:{click:e.gotoDashboard}},[e._v("开始使用")]):e._e()],1)]),a("div",{staticClass:"intro"},[a("span",[e._v("超越富文本编辑器，面向 doc 与未来的办公软件")]),a("img",{attrs:{src:n("a85b"),alt:"shot1"}})])]),a("el-main",[a("div",{staticClass:"outer"},[a("div",{staticClass:"inner"},[a("div",[a("h3",[e._v("文档协作")]),a("span",[e._v(" 轻量级文档协同，支持文档多人编辑。 ")])]),a("img",{attrs:{id:"shot2",src:n("b482"),alt:"adv1"}})]),a("div",{staticClass:"inner"},[a("img",{attrs:{id:"shot3",src:n("0c14"),alt:"adv2"}}),a("div",[a("h3",{staticClass:"lefth3"},[e._v("权限可控")]),a("span",[e._v(" 文档读写权限可控，确保信息安全。 ")])])]),a("div",{staticClass:"inner"},[a("div",[a("h3",[e._v("丰富模板")]),a("span",[e._v(" 支持模板自定义，开启高效工作模式。 ")])]),a("img",{attrs:{id:"shot4",src:n("1f3e"),alt:"adv3"}})])])]),a("el-footer",[a("div",{staticClass:"footer"},[a("img",{staticClass:"footerlogo",attrs:{src:n("0b09"),alt:"logowhite"}}),a("el-button",{staticClass:"footerbtn",on:{click:e.gameStart}},[e._v("开始使用")]),a("div",{staticClass:"produced"},[a("p",[e._v("By")]),a("div",[a("span",[e._v("LE.")]),a("span",[e._v("Rank_E")]),a("span",[e._v("Redal")]),a("span",[e._v("Sujun")]),a("span",[e._v("XuYanyang")])])])],1)])],1)},A=[],$={data:function(){return{hasLogin:!1}},created:function(){this.checkLogin()},methods:{login:function(){this.$router.push("/login")},register:function(){this.$router.push("/register")},checkLogin:function(){null!==window.sessionStorage.getItem("token")&&(this.hasLogin=!0)},gotoDashboard:function(){this.$router.push("/dashboard")},gameStart:function(){null!==window.sessionStorage.getItem("token")?this.$router.push("/dashboard"):this.$router.push("/login")}}},S=$,R=(n("bd90"),Object(c["a"])(S,C,A,!1,null,"0cacfc2c",null)),L=R.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticClass:"outer-container"},[n("img",{staticClass:"background",attrs:{src:"",alt:"background"}}),n("el-header",[n("div",{staticClass:"welcomebtn",on:{click:e.gotoWelcome}},[n("div",{attrs:{id:"bars"}}),n("div",{attrs:{id:"bars"}}),n("div",{attrs:{id:"bars"}})]),n("div",{attrs:{id:"triangle-top-left"}}),n("div",{staticClass:"navbar"},[n("div",{staticClass:"item"},[n("el-popover",{attrs:{placement:"bottom",width:"260",trigger:"hover",title:"通知"}},[n("el-scrollbar",{staticStyle:{height:"360px"}},e._l(e.messageList,(function(t){return n("div",{key:t.id,staticClass:"notion"},[n("span",[e._v(e._s(t.content))]),n("div",{staticClass:"notion-info"},[n("span",[e._v(e._s(t.createtime))]),2===t.category?n("div",{staticClass:"notion-btn"},[n("el-button",{staticClass:"accept",attrs:{icon:"el-icon-check",circle:"",size:"mini"},on:{click:function(n){return e.agreeMessage(t)}}}),n("el-button",{staticClass:"reject",attrs:{icon:"el-icon-close",circle:"",size:"mini"},on:{click:function(n){return e.refuseMessage(t)}}})],1):n("div",{staticClass:"notion-btn"},[n("el-button",{staticClass:"accept",attrs:{icon:"el-icon-check",circle:"",size:"mini"},on:{click:function(n){return e.readMessage(t)}}})],1)])])})),0),n("el-badge",{attrs:{slot:"reference",value:e.messageInfo.messageNum,max:99,hidden:e.messageInfo.isHidden},slot:"reference"},[n("el-button",{attrs:{id:"bellbtn",icon:"el-icon-bell",circle:""},on:{click:e.getMessage}})],1)],1)],1),n("div",{staticClass:"icon-dropdown"},[n("el-dropdown",[n("el-button",{attrs:{id:"iconbtn",circle:""}},[n("img",{staticClass:"icon",attrs:{src:"http://123.57.67.128:8000"+e.image,alt:"用户头像"}})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(t){return e.gotoProfile(t)}}},[n("span",[e._v("账号设置")])]),n("el-dropdown-item",{nativeOn:{click:function(t){return e.gotoWelcome(t)}}},[n("span",[e._v("前往官网")])]),n("el-dropdown-item",{nativeOn:{click:function(t){return e.getHelp(t)}}},[n("span",[e._v("获取帮助")])]),n("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(t){return e.logout(t)}}},[n("span",[e._v("退出登录")])])],1)],1)],1)]),n("div",{attrs:{id:"triangle-top-right"}})]),n("el-container",{staticClass:"inner-container"},[n("el-aside",{attrs:{width:"205px"}},[n("el-menu",{attrs:{"background-color":"whitesmoke","text-color":"rgb(150, 150, 150)","active-text-color":"rgb(85, 85, 85)",router:!0,"default-active":e.$route.path}},[n("el-menu-item",{attrs:{index:"/dashboard"}},[n("i",{staticClass:"el-icon-files"}),n("span",[e._v("工作台")])]),n("el-divider"),n("el-menu-item",{attrs:{index:"/desktop"}},[n("i",{staticClass:"el-icon-house"}),n("span",[e._v("我的桌面")])]),n("el-submenu",{attrs:{index:""}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-box"}),n("span",[e._v("团队空间")]),n("el-button",{staticClass:"addmember",on:{click:function(t){e.addSpaceDialogVisible=!0}}},[n("i",{staticClass:"el-icon-plus"})])],1),n("el-menu-item-group",e._l(e.teamList,(function(t){return n("el-menu-item",{key:t.id,attrs:{index:"/space/"+t.teamId}},[n("span",[e._v(e._s(t.teamName))])])})),1)],2),n("el-menu-item",{attrs:{index:"/trash"}},[n("i",{staticClass:"el-icon-delete"}),n("span",[e._v("回收站")])]),n("el-divider"),n("el-menu-item",{attrs:{index:"/help"}},[n("i",{staticClass:"el-icon-question"}),n("span",[e._v("帮助")])])],1),n("el-dialog",{attrs:{title:"添加团队空间",width:"600px",visible:e.addSpaceDialogVisible,"append-to-body":!0},on:{"update:visible":function(t){e.addSpaceDialogVisible=t},close:e.addSpaceDialogClosed}},[n("el-tabs",[n("el-tab-pane",{attrs:{label:"创建空间"}},[n("el-form",{ref:"createSpaceRef",attrs:{model:e.createSpaceForm,rules:e.createSpaceRules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"空间名称",prop:"spaceName"}},[n("el-input",{model:{value:e.createSpaceForm.spaceName,callback:function(t){e.$set(e.createSpaceForm,"spaceName",t)},expression:"createSpaceForm.spaceName"}})],1)],1),n("el-button",{on:{click:e.createTeamSpace}},[e._v("创建")])],1),n("el-tab-pane",{attrs:{label:"加入空间"}},[n("el-form",{ref:"joinSpaceRef",attrs:{model:e.joinSpaceForm,rules:e.joinSpaceRules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"空间名称",prop:"spaceName"}},[n("el-input",{model:{value:e.joinSpaceForm.spaceName,callback:function(t){e.$set(e.joinSpaceForm,"spaceName",t)},expression:"joinSpaceForm.spaceName"}})],1)],1),n("el-button",{on:{click:e.joinTeamSpace}},[e._v("加入")])],1)],1)],1)],1),n("el-main",[n("router-view"),n("div",{staticClass:"btnsarea"},[n("el-button",{staticClass:"newdoc",on:{click:e.createNewDoc}},[n("span",[e._v("新建文档")])])],1)],1)],1)],1)},y=[],O=(n("b0c0"),{components:{},data:function(){return{image:"",teamList:[],messageInfo:{messageNum:"",isHidden:!1},messageList:[],joinSpaceForm:{spaceName:""},createSpaceForm:{spaceName:""},addSpaceDialogVisible:!1,createSpaceRules:{spaceName:[{required:!0,message:"名称不能为空",trigger:"blur"}]},joinSpaceRules:{spaceName:[{required:!0,message:"名称不能为空",trigger:"blur"}]}}},created:function(){this.getTeamList(),this.getMessage(),this.getImage()},activated:function(){this.getTeamList(),this.getMessage(),this.getImage()},methods:{getImage:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=window.sessionStorage.getItem("token"),t.next=3,e.$http.get("/user/?token="+n);case 3:a=t.sent,s=a.data,e.image=s.image;case 6:case"end":return t.stop()}}),t)})))()},readMessage:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=window.sessionStorage.getItem("token"),s=e.id,o={status:0},n.next=5,t.$http.patch("/message/"+s+"/?token="+a,o);case 5:r=n.sent,i=r.data,"成功"===i?(t.$message.success("消息已读"),t.getMessage()):t.$message.error(i);case 8:case"end":return n.stop()}}),n)})))()},agreeMessage:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.group,s=window.sessionStorage.getItem("token"),o={user_id:e.senduser,decision:!0},n.next=5,t.$http.put("/group/"+a+"/?token="+s,o);case 5:r=n.sent,i=r.data,"成功"===i?(t.$message.success("该用户已加入您的团队"),t.readMessage(e)):t.$message.err(i);case 8:case"end":return n.stop()}}),n)})))()},refuseMessage:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.group,s=window.sessionStorage.getItem("token"),o={user_id:e.senduser,decision:!1},n.next=5,t.$http.put("/group/"+a+"/?token="+s,o);case 5:r=n.sent,i=r.data,"成功"===i?(t.$message.success("已拒绝此申请"),t.readMessage(e)):t.$message.err(i);case 8:case"end":return n.stop()}}),n)})))()},getMessage:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.messageList=[],e.messageInfo.messageNum="",n=window.sessionStorage.getItem("token"),t.next=5,e.$http.get("/message/?token="+n);case 5:a=t.sent,s=a.data,e.messageInfo.messageNum=s[0].count,e.messageList=s;case 9:case"end":return t.stop()}}),t)})))()},gotoProfile:function(){this.$router.push("/profile")},gotoWelcome:function(){this.$router.push("/")},getHelp:function(){this.$router.push("/help")},logout:function(){window.sessionStorage.removeItem("token"),this.$router.push("/")},getTeamList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.teamList=[],n=window.sessionStorage.getItem("token"),t.next=4,e.$http.get("/group/user/?token="+n);case 4:for(a=t.sent,s=a.data,o=s.length,r=0;r<o;r++)i={teamId:s[r].id,teamName:s[r].name},e.teamList.push(i);case 8:case"end":return t.stop()}}),t)})))()},createTeamSpace:function(){var e=this;this.$refs.createSpaceRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(n){var a,s,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return a=window.sessionStorage.getItem("token"),s={name:e.createSpaceForm.spaceName},t.next=6,e.$http.post("/group/?token="+a,s);case 6:o=t.sent,r=o.data,"小组名重复"===r?e.$message.error(r):(e.$message.success("创建团队空间成功"),e.addSpaceDialogVisible=!1),e.getTeamList();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},joinTeamSpace:function(){var e=this;this.$refs.joinSpaceRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(n){var a,s,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return a=window.sessionStorage.getItem("token"),s={category:"2",name:e.joinSpaceForm.spaceName},t.next=6,e.$http.post("/message/?token="+a,s);case 6:o=t.sent,r=o.data,"成功"===r?(e.addSpaceDialogVisible=!1,e.$message.success("已发出申请")):null===r?e.$message.error("该小组不存在"):e.$message.error(r),e.getTeamList();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},createNewDoc:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o,r,i,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=window.location.hash,a=window.sessionStorage.getItem("token"),s="/doc/?token="+a,"#/dashboard"===n||"#/desktop"===n||"#trash"===n?o={title:"无标题",auth:3}:(r=e.$route.params.id,o={title:"无标题",auth:3,group:r}),t.next=6,e.$http.post(s,o);case 6:i=t.sent,c=i.data,"请先登录"===c?e.$message.error(c):(l=c.id,e.$router.push("/doc/"+l));case 9:case"end":return t.stop()}}),t)})))()},addSpaceDialogClosed:function(){this.$refs.createSpaceRef.resetFields(),this.$refs.joinSpaceRef.resetFields()}}}),j=O,T=(n("8b71"),n("1047"),Object(c["a"])(j,F,y,!1,null,"6a0f3fa6",null)),E=T.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("el-tabs",{on:{"tab-click":e.tabClick}},[a("el-tab-pane",{attrs:{label:"最近使用"}}),a("el-tab-pane",{attrs:{label:"我创建的"}}),a("el-tab-pane",{attrs:{label:"我的收藏"}})],1),a("div",{staticClass:"switchbtns"},[a("el-button-group",[a("el-tooltip",{attrs:{content:"块状显示",placement:"bottom",effect:"light"}},[a("el-button",{attrs:{icon:"el-icon-menu"},on:{click:function(t){e.isListShow=!1}}})],1),a("el-tooltip",{attrs:{content:"列表显示",placement:"bottom",effect:"light"}},[a("el-button",{attrs:{icon:"el-icon-s-unfold"},on:{click:function(t){e.isListShow=!0}}})],1)],1)],1)],1),e.isListShow&&this.docListInfo.total>0?a("div",{staticClass:"doclist"},[a("el-table",{attrs:{data:e.docList,"default-sort":{prop:"title",order:"ascending"},"max-height":"600px"}},[a("el-table-column",{attrs:{prop:"title",label:"文件名",sortable:"",width:"180",align:"left","header-align":"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"docname",attrs:{type:"text",circle:""},nativeOn:{click:function(n){return e.openDoc(t.row)}}},[e._v(e._s(t.row.title))]),t.row.status>0?a("span",[e._v("该文档正在被编辑")]):e._e()]}}],null,!1,3162940790)}),a("el-table-column",{attrs:{prop:"nickname",label:"创建者",width:"160",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间",sortable:"",width:"200",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{prop:"updatetime",label:"最后编辑时间",sortable:"",width:"200",align:"center","header-align":"right"}}),a("el-table-column",{attrs:{prop:"lasteditor_nickname",label:"最后编辑者",width:"200",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{align:"right","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"favbtn",attrs:{size:"mini",icon:t.row.isFavorite?"el-icon-star-on":"el-icon-star-off",circle:""},nativeOn:{click:function(n){return e.changeFavState(t.row)}}}),a("el-dropdown",[a("el-button",{staticClass:"morebtn",attrs:{size:"mini",icon:"el-icon-more",circle:""}}),a("el-dropdown-menu",{staticClass:"dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(n){return e.shareDoc(t.row)}}},[a("span",[e._v("分享")])]),t.row.hasAuth?a("el-dropdown-item",{nativeOn:{click:function(n){return e.showSetAuthDialog(t.row)}}},[a("span",[e._v("设置权限")])]):e._e(),a("el-dropdown-item",{nativeOn:{click:function(n){return e.changeFavState(t.row)}}},[a("span",[e._v(e._s(t.row.isFavorite?"取消收藏":"收藏"))])]),a("el-dropdown-item",{nativeOn:{click:function(n){return e.showrenameDocDialog(t.row.id)}}},[a("span",[e._v("重命名")])]),a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(n){return e.deleteDoc(t.row)}}},[a("span",[e._v("删除")])])],1)],1)]}}],null,!1,510975792)})],1)],1):e._e(),!e.isListShow&&this.docListInfo.total>0?a("div",{staticClass:"docblock"},e._l(e.docList,(function(t){return a("div",{key:t.id},[a("div",{staticClass:"block",on:{click:function(n){return e.openDoc(t)}}},[a("div",[a("img",{staticClass:"img-doc",attrs:{src:n("fa64"),alt:"文档"}})]),a("div",{staticClass:"menu"},[a("span",{attrs:{id:"title"}},[e._v(e._s(t.title))]),a("div",{staticClass:"info"},[a("div",[t.status<1?a("span",[e._v("最后于")]):e._e(),t.status<1?a("span",[e._v(e._s(t.updatetime))]):e._e()]),a("div",[t.status<1?a("span",[e._v("由")]):e._e(),t.status<1?a("span",[e._v(e._s(t.lasteditor_nickname))]):e._e(),t.status<1?a("span",[e._v("编辑")]):e._e(),t.status>0?a("span",[e._v("该文档正在被编辑")]):e._e()])])]),a("el-dropdown",[a("el-button",{staticClass:"morebtn",staticStyle:{transform:"rotate(90deg)"},attrs:{icon:"el-icon-more"}}),a("el-dropdown-menu",{staticClass:"dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(n){return e.shareDoc(t)}}},[a("span",[e._v("分享")])]),t.hasAuth?a("el-dropdown-item",{nativeOn:{click:function(n){return e.showSetAuthDialog(t)}}},[a("span",[e._v("设置权限")])]):e._e(),a("el-dropdown-item",{nativeOn:{click:function(n){return e.changeFavState(t)}}},[a("span",[e._v(e._s(t.isFavorite?"取消收藏":"收藏"))])]),a("el-dropdown-item",{nativeOn:{click:function(n){return e.showrenameDocDialog(t.id)}}},[a("span",[e._v("重命名")])]),a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(n){return e.deleteDoc(t)}}},[a("span",[e._v("删除")])])],1)],1)],1)])})),0):e._e(),a("el-dialog",{staticClass:"sharelog",attrs:{title:"分享文档链接",visible:e.shareDocDialogVisible,width:"500px","append-to-body":!0},on:{"update:visible":function(t){e.shareDocDialogVisible=t},close:e.shareDocDialogClosed}},[a("el-input",{attrs:{placeholder:"文档链接"},model:{value:e.shareDocForm.url,callback:function(t){e.$set(e.shareDocForm,"url",t)},expression:"shareDocForm.url"}})],1),a("el-dialog",{attrs:{title:"设置文档权限",visible:e.setAuthDialogVisible,width:"500px","append-to-body":!0},on:{"update:visible":function(t){e.setAuthDialogVisible=t},close:e.setAuthDialogClosed}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.docAuth.label,callback:function(t){e.$set(e.docAuth,"label",t)},expression:"docAuth.label"}},e._l(e.authList,(function(t){return a("el-option",{key:t.auth,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.label))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.value))])])})),1),a("el-button",{on:{click:e.setAuth}},[e._v("确 定")])],1),a("el-dialog",{staticClass:"renamelog",attrs:{title:"重命名文档",visible:e.renameDocDialogVisible,width:"600px","append-to-body":!0},on:{"update:visible":function(t){e.renameDocDialogVisible=t},close:e.renameDocDialogClosed}},[a("el-form",{ref:"renameDocFormRef",attrs:{model:e.renameDocForm}},[a("el-form-item",{attrs:{prop:"newName"}},[a("el-input",{attrs:{placeholder:"文档名称"},model:{value:e.renameDocForm.newName,callback:function(t){e.$set(e.renameDocForm,"newName",t)},expression:"renameDocForm.newName"}})],1)],1),a("el-button",{on:{click:e.renameDoc}},[e._v("确 定")])],1),this.docListInfo.total>0?a("div",[a("el-pagination",{attrs:{"current-page":e.docListInfo.pageNum,"page-size":12,layout:"total, prev, pager, next, jumper",total:e.docListInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)},M=[],V=(n("ac1f"),n("5319"),{data:function(){return{listType:0,docListInfo:{query:"",type:0,pageNum:1,total:0},docList:[],shareDocForm:{url:""},docAuth:{docId:0,auth:0,label:""},renameDocForm:{userId:"",newName:""},setAuthDialogVisible:!1,shareDocDialogVisible:!1,renameDocDialogVisible:!1,isListShow:!1,authList:[{auth:0,value:"仅自己可以查看",label:"私密文档"},{auth:1,value:"其他人可以查看，但不能编辑或评论",label:"他人可读"},{auth:2,value:"其他人可以查看或评论，但不能编辑",label:"他人可读/评论"},{auth:3,value:"其他人可以查看、评论、编辑",label:"他人可读/编辑/评论"}]}},created:function(){this.getUsed()},methods:{tabClick:function(e,t){"最近使用"===e.label?this.getUsed():"我创建的"===e.label?this.getOwn():"我的收藏"===e.label&&this.getFavorite()},getUsed:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.docList=[],1!==e.listType&&2!==e.listType||(e.docListInfo.pageNum=1),n=window.sessionStorage.getItem("token"),a=e.docListInfo.pageNum,t.next=6,e.$http.get("/browse/?token="+n+"&page="+a);case 6:s=t.sent,o=s.data,e.docList=o,e.docListInfo.total=e.docList[0].total,e.listType=0;case 11:case"end":return t.stop()}}),t)})))()},getOwn:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.docList=[],e.docListInfo.total=0,0!==e.listType&&2!==e.listType||(e.docListInfo.pageNum=1),n=window.sessionStorage.getItem("token"),a=e.docListInfo.pageNum,t.next=7,e.$http.get("/doc/user/?token="+n+"&page="+a);case 7:s=t.sent,o=s.data,e.docList=o,e.docListInfo.total=e.docList[0].total,e.listType=1;case 12:case"end":return t.stop()}}),t)})))()},getFavorite:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.docList=[],e.docListInfo.total=0,0!==e.listType&&1!==e.listType||(e.docListInfo.pageNum=1),n=window.sessionStorage.getItem("token"),a=e.docListInfo.pageNum,t.next=7,e.$http.get("/favorite/?token="+n+"&page="+a);case 7:s=t.sent,o=s.data,e.docList=o,e.docListInfo.total=e.docList[0].total,e.listType=2;case 12:case"end":return t.stop()}}),t)})))()},openDoc:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$router.push("/doc/"+e.id);case 1:case"end":return n.stop()}}),n)})))()},shareDoc:function(e){var t=window.location.href.replace("dashboard","doc/"+e.id);this.shareDocForm.url=t,this.shareDocDialogVisible=!0},setAuth:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return"仅自己可以查看"===e.docAuth.label?e.docAuth.auth=0:"其他人可以查看，但不能编辑或评论"===e.docAuth.label?e.docAuth.auth=1:"其他人可以查看或评论，但不能编辑"===e.docAuth.label?e.docAuth.auth=2:e.docAuth.auth=3,n=window.sessionStorage.getItem("token"),a={auth:e.docAuth.auth,noweditor:null},t.next=5,e.$http.patch("/doc/"+e.docAuth.docId+"/?token="+n,a);case 5:s=t.sent,o=s.data,"请先登录"===o||"无权限"===o||"该文档正在被编辑"===o?e.$message.error(o):(e.$message.success("权限更改成功"),e.setAuthDialogVisible=!1);case 8:case"end":return t.stop()}}),t)})))()},changeFavState:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r,i,c,l,u,d,m,p,g;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=window.sessionStorage.getItem("token"),!0!==e.isFavorite){n.next=9;break}return n.next=4,t.$http.delete("/favorite/"+e.id+"/?token="+a);case 4:s=n.sent,o=s.data,"成功"===o?t.$message.success("取消收藏成功"):t.$$message.error("取消收藏失败"),n.next=14;break;case 9:return n.next=11,t.$http.put("/favorite/"+e.id+"/?token="+a);case 11:r=n.sent,i=r.data,"成功"===i?t.$message.success("收藏成功"):t.$$message.error("收藏失败");case 14:if(e.isFavorite=!e.isFavorite,c=t.docListInfo.pageNum,0!==t.listType){n.next=23;break}return n.next=19,t.$http.get("/browse/?token="+a+"&page="+c);case 19:l=n.sent,u=l.data,t.docList=u,t.docListInfo.total=t.docList[0].total;case 23:if(1!==t.listType){n.next=30;break}return n.next=26,t.$http.get("/doc/user/?token="+a+"&page="+c);case 26:d=n.sent,m=d.data,t.docList=m,t.docListInfo.total=t.docList[0].total;case 30:if(2!==t.listType){n.next=37;break}return n.next=33,t.$http.get("/favorite/?token="+a+"&page="+c);case 33:p=n.sent,g=p.data,t.docList=g,t.docListInfo.total=t.docList[0].total;case 37:case"end":return n.stop()}}),n)})))()},renameDoc:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function e(){var n,a,s,o,r,i,c,l,u,d,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.renameDocDialogVisible=!1,n=window.sessionStorage.getItem("token"),a={title:t.renameDocForm.newName,noweditor:null},e.next=5,t.$http.patch("/doc/"+t.renameDocForm.userId+"/?token="+n,a);case 5:if(s=e.sent,o=s.data,"请先登录"===o||"该文档正在被编辑"===o||"无权限"===o?t.$message.error("重命名失败"):t.$message.success("重命名成功"),r=t.docListInfo.pageNum,0!==t.listType){e.next=16;break}return e.next=12,t.$http.get("/browse/?token="+n+"&page="+r);case 12:i=e.sent,c=i.data,t.docList=c,t.docListInfo.total=t.docList[0].total;case 16:if(1!==t.listType){e.next=23;break}return e.next=19,t.$http.get("/doc/user/?token="+n+"&page="+r);case 19:l=e.sent,u=l.data,t.docList=u,t.docListInfo.total=t.docList[0].total;case 23:if(2!==t.listType){e.next=30;break}return e.next=26,t.$http.get("/favorite/?token="+n+"&page="+r);case 26:d=e.sent,m=d.data,t.docList=m,t.docListInfo.total=t.docList[0].total;case 30:case"end":return e.stop()}}),e)})))()},deleteDoc:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r,i,c,l,u,d,m,p;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=window.sessionStorage.getItem("token"),s={delete:"1",noweditor:null},n.next=4,t.$http.patch("/doc/"+e.id+"/?token="+a,s);case 4:if(o=n.sent,r=o.data,"请先登录"===r||"该文档正在被编辑"===r||"无权限"===r?t.$message.error("删除失败"):t.$message.success("删除成功"),i=t.docListInfo.pageNum,0!==t.listType){n.next=15;break}return n.next=11,t.$http.get("/browse/?token="+a+"&page="+i);case 11:c=n.sent,l=c.data,t.docList=l,t.docListInfo.total=t.docList[0].total;case 15:if(1!==t.listType){n.next=22;break}return n.next=18,t.$http.get("/doc/user/?token="+a+"&page="+i);case 18:u=n.sent,d=u.data,t.docList=d,t.docListInfo.total=t.docList[0].total;case 22:if(2!==t.listType){n.next=29;break}return n.next=25,t.$http.get("/favorite/?token="+a+"&page="+i);case 25:m=n.sent,p=m.data,t.docList=p,t.docListInfo.total=t.docList[0].total;case 29:case"end":return n.stop()}}),n)})))()},showSetAuthDialog:function(e){this.docAuth.docId=e.id,this.setAuthDialogVisible=!0,this.docAuth.auth=e.auth,0===this.docAuth.auth?this.docAuth.label="私密文档":1===this.docAuth.auth?this.docAuth.label="他人可读":2===this.docAuth.auth?this.docAuth.label="他人可读/评论":this.docAuth.label="他人可读/编辑/评论"},showrenameDocDialog:function(e){this.renameDocDialogVisible=!0,this.renameDocForm.userId=e},shareDocDialogClosed:function(){this.shareDocDialogVisible=!1,this.$refs.shareDocFormRef.resetFields()},setAuthDialogClosed:function(){this.setAuthDialogVisible=!1,this.docAuth.status=0,this.docAuth.label=""},handleSizeChange:function(e){this.docListInfo.pageSize=e},handleCurrentChange:function(e){this.docListInfo.pageNum=e,0===this.listType&&this.getUsed(),1===this.listType&&this.getOwn(),2===this.listType&&this.getFavorite()},renameDocDialogClosed:function(){this.$refs.renameDocFormRef.resetFields()}}}),B=V,z=(n("b8fc"),Object(c["a"])(B,N,M,!1,null,"dc9f742a",null)),P=z.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("h3",[e._v("我的桌面")]),a("div",{staticClass:"switchbtns"},[a("el-button-group",[a("el-tooltip",{attrs:{content:"块状显示",placement:"bottom",effect:"light"}},[a("el-button",{attrs:{icon:"el-icon-menu"},on:{click:function(t){e.isListShow=!1}}})],1),a("el-tooltip",{attrs:{content:"列表显示",placement:"bottom",effect:"light"}},[a("el-button",{attrs:{icon:"el-icon-s-unfold"},on:{click:function(t){e.isListShow=!0}}})],1)],1)],1)]),e.isListShow&&this.docListInfo.total>0?a("div",{staticClass:"doclist"},[a("el-table",{attrs:{data:e.docList,"default-sort":{prop:"title",order:"ascending"},"max-height":"600px"}},[a("el-table-column",{attrs:{prop:"title",label:"文件名",sortable:"",width:"180",align:"left","header-align":"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"docname",attrs:{type:"text",circle:""},nativeOn:{click:function(n){return e.openDoc(t.row)}}},[e._v(e._s(t.row.title))])]}}],null,!1,1526350890)}),a("el-table-column",{attrs:{prop:"nickname",label:"创建者",width:"160",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间",sortable:"",width:"200",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{prop:"updatetime",label:"最后编辑时间",sortable:"",width:"200",align:"center","header-align":"right"}}),a("el-table-column",{attrs:{prop:"lasteditor_nickname",label:"最后编辑者",width:"200",align:"center","header-align":"center"}}),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"favbtn",attrs:{size:"mini",icon:t.row.isFavorite?"el-icon-star-on":"el-icon-star-off",circle:""},nativeOn:{click:function(n){return e.changeFavState(t.row)}}}),a("el-dropdown",[a("el-button",{staticClass:"morebtn",attrs:{size:"mini",icon:"el-icon-more",circle:""}}),a("el-dropdown-menu",{staticClass:"dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(n){return e.shareDoc(t.row)}}},[a("span",[e._v("分享")])]),t.row.hasAuth?a("el-dropdown-item",{nativeOn:{click:function(n){return e.showSetAuthDialog(t.row)}}},[a("span",[e._v("设置权限")])]):e._e(),a("el-dropdown-item",{nativeOn:{click:function(n){return e.changeFavState(t.row)}}},[a("span",[e._v(e._s(t.row.isFavorite?"取消收藏":"收藏"))])]),a("el-dropdown-item",{nativeOn:{click:function(n){return e.showrenameDocDialog(t.row.id)}}},[a("span",[e._v("重命名")])]),a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(n){return e.deleteDoc(t.row)}}},[a("span",[e._v("删除")])])],1)],1)]}}],null,!1,510975792)})],1)],1):e._e(),!e.isListShow&&this.docListInfo.total>0?a("div",{staticClass:"docblock"},e._l(e.docList,(function(t){return a("div",{key:t.id},[a("div",{staticClass:"block",on:{click:function(n){return e.openDoc(t)}}},[a("div",[a("img",{staticClass:"img-doc",attrs:{src:n("fa64"),alt:"文档"}})]),a("div",{staticClass:"menu"},[a("span",{attrs:{id:"title"}},[e._v(e._s(t.title))]),a("div",{staticClass:"info"},[a("div",[a("span",[e._v("最后于")]),a("span",[e._v(e._s(t.updatetime))])]),a("div",[a("span",[e._v("由")]),a("span",[e._v(e._s(t.lasteditor_nickname))]),a("span",[e._v("编辑")])])])]),a("el-dropdown",[a("el-button",{staticClass:"morebtn",staticStyle:{transform:"rotate(90deg)"},attrs:{icon:"el-icon-more"}}),a("el-dropdown-menu",{staticClass:"dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(n){return e.shareDoc(t)}}},[a("span",[e._v("分享")])]),t.hasAuth?a("el-dropdown-item",{nativeOn:{click:function(n){return e.showSetAuthDialog(t)}}},[a("span",[e._v("设置权限")])]):e._e(),a("el-dropdown-item",{nativeOn:{click:function(n){return e.changeFavState(t)}}},[a("span",[e._v(e._s(t.isFavorite?"取消收藏":"收藏"))])]),a("el-dropdown-item",{nativeOn:{click:function(n){return e.showrenameDocDialog(t.id)}}},[a("span",[e._v("重命名")])]),a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(n){return e.deleteDoc(t)}}},[a("span",[e._v("删除")])])],1)],1)],1)])})),0):e._e(),a("el-dialog",{attrs:{title:"分享文档链接",visible:e.shareDocDialogVisible,width:"500px","append-to-body":!0},on:{"update:visible":function(t){e.shareDocDialogVisible=t},close:e.shareDocDialogClosed}},[a("el-input",{attrs:{placeholder:"文档链接"},model:{value:e.shareDocForm.url,callback:function(t){e.$set(e.shareDocForm,"url",t)},expression:"shareDocForm.url"}})],1),a("el-dialog",{attrs:{title:"设置文档权限",visible:e.setAuthDialogVisible,width:"500px","append-to-body":!0},on:{"update:visible":function(t){e.setAuthDialogVisible=t},close:e.setAuthDialogClosed}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.docAuth.label,callback:function(t){e.$set(e.docAuth,"label",t)},expression:"docAuth.label"}},e._l(e.authList,(function(t){return a("el-option",{key:t.auth,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.label))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.value))])])})),1),a("el-button",{on:{click:e.setAuth}},[e._v("确 定")])],1),a("el-dialog",{attrs:{title:"重命名文档",visible:e.renameDocDialogVisible,width:"600px","append-to-body":!0},on:{"update:visible":function(t){e.renameDocDialogVisible=t},close:e.renameDocDialogClosed}},[a("el-form",{ref:"renameDocFormRef",attrs:{model:e.renameDocForm}},[a("el-form-item",{attrs:{prop:"newName"}},[a("el-input",{attrs:{placeholder:"文档名称"},model:{value:e.renameDocForm.newName,callback:function(t){e.$set(e.renameDocForm,"newName",t)},expression:"renameDocForm.newName"}})],1)],1),a("el-button",{on:{click:e.renameDoc}},[e._v("确 定")])],1),this.docListInfo.total>0?a("div",[a("el-pagination",{attrs:{"current-page":e.docListInfo.pageNum,"page-size":12,layout:"total, prev, pager, next, jumper",total:e.docListInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)},q=[],Q={data:function(){return{docListInfo:{query:"",type:0,pageNum:1,total:0},docList:[{id:1,isFavorite:!0,hasAuth:!0,title:"文档名2",nickname:"王小虎1",createtime:"05-02 10：12",updatetime:"05-02 10：12",lasteditor_nickname:"王小2",status:0,auth:0},{id:3,isFavorite:!1,hasAuth:!0,title:"文档名4",nickname:"王小虎2",createtime:"05-02 10：12",updatetime:"05-02 10：41",lasteditor_nickname:"王小3",status:1,auth:1},{id:2,isFavorite:!1,hasAuth:!1,title:"文档名1",nickname:"王小虎3",createtime:"05-02 10：12",updatetime:"05-02 10：51",lasteditor_nickname:"王小4",status:0,auth:2},{id:6,isFavorite:!0,hasAuth:!1,title:"文档名3",nickname:"王小虎4",createtime:"05-02 10：12",updatetime:"05-02 10：01",lasteditor_nickname:"王小1",status:1,auth:3}],shareDocForm:{url:""},docAuth:{docId:0,auth:0,label:""},renameDocForm:{userId:"",newName:""},setAuthDialogVisible:!1,shareDocDialogVisible:!1,renameDocDialogVisible:!1,isListShow:!1,authList:[{auth:0,value:"仅自己可以查看",label:"私密文档"},{auth:1,value:"其他人可以查看，但不能编辑或评论",label:"他人可读"},{auth:2,value:"其他人可以查看或评论，但不能编辑",label:"他人可读/评论"},{auth:3,value:"其他人可以查看、评论、编辑",label:"他人可读/编辑/评论"}]}},created:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getDesktop();case 1:case"end":return t.stop()}}),t)})))()},methods:{getDesktop:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=window.sessionStorage.getItem("token"),a=e.docListInfo.pageNum,t.next=4,e.$http.get("/doc/user/?token="+n+"&page="+a);case 4:s=t.sent,o=s.data,"查询结果为空"===o?e.docListInfo.total=0:(e.docList=o,e.docListInfo.total=e.docList[0].total);case 7:case"end":return t.stop()}}),t)})))()},openDoc:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$router.push("/doc/"+e.id);case 1:case"end":return n.stop()}}),n)})))()},shareDoc:function(e){var t=window.location.href.replace("desktop","doc/"+e.id);this.shareDocForm.url=t,this.shareDocDialogVisible=!0},setAuth:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return"仅自己可以查看"===e.docAuth.label?e.docAuth.auth=0:"其他人可以查看，但不能编辑或评论"===e.docAuth.label?e.docAuth.auth=1:"其他人可以查看或评论，但不能编辑"===e.docAuth.label?e.docAuth.auth=2:e.docAuth.auth=3,n=window.sessionStorage.getItem("token"),a={auth:e.docAuth.auth,noweditor:null},t.next=5,e.$http.patch("/doc/"+e.docAuth.docId+"/?token="+n,a);case 5:s=t.sent,o=s.data,"请先登录"===o||"无权限"===o||"该文档正在被编辑"===o?e.$message.error(o):(e.$message.success("权限更改成功"),e.setAuthDialogVisible=!1);case 8:case"end":return t.stop()}}),t)})))()},changeFavState:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=window.sessionStorage.getItem("token"),!0!==e.isFavorite){n.next=9;break}return n.next=4,t.$http.delete("/favorite/"+e.id+"/?token="+a);case 4:s=n.sent,o=s.data,"成功"===o?t.$message.success("取消收藏成功"):t.$$message.error("取消收藏失败"),n.next=14;break;case 9:return n.next=11,t.$http.put("/favorite/"+e.id+"/?token="+a);case 11:r=n.sent,i=r.data,"成功"===i?t.$message.success("收藏成功"):t.$$message.error("收藏失败");case 14:e.isFavorite=!e.isFavorite;case 15:case"end":return n.stop()}}),n)})))()},renameDoc:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function e(){var n,a,s,o,r,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.renameDocDialogVisible=!1,n=window.sessionStorage.getItem("token"),a={title:t.renameDocForm.newName,noweditor:null},e.next=5,t.$http.patch("/doc/"+t.renameDocForm.userId+"/?token="+n,a);case 5:return s=e.sent,o=s.data,"请先登录"===o||"该文档正在被编辑"===o||"无权限"===o?t.$message.error("重命名失败"):t.$message.success("重命名成功"),r=t.docListInfo.pageNum,e.next=11,t.$http.get("/doc/user/?token="+n+"&page="+r);case 11:i=e.sent,c=i.data,t.docList=c,t.docListInfo.total=t.docList[0].total;case 15:case"end":return e.stop()}}),e)})))()},deleteDoc:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r,i,c,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=window.sessionStorage.getItem("token"),s={delete:"1",noweditor:null},n.next=4,t.$http.patch("/doc/"+e.id+"/?token="+a,s);case 4:return o=n.sent,r=o.data,"请先登录"===r||"该文档正在被编辑"===r||"无权限"===r?t.$message.error("删除失败"):t.$message.success("删除成功"),i=t.docListInfo.pageNum,n.next=10,t.$http.get("/doc/user/?token="+a+"&page="+i);case 10:c=n.sent,l=c.data,t.docList=l,t.docListInfo.total=t.docList[0].total;case 14:case"end":return n.stop()}}),n)})))()},showSetAuthDialog:function(e){this.docAuth.docId=e.id,this.setAuthDialogVisible=!0,this.docAuth.auth=e.auth,0===this.docAuth.auth?this.docAuth.label="私密文档":1===this.docAuth.auth?this.docAuth.label="他人可读":2===this.docAuth.auth?this.docAuth.label="他人可读/评论":this.docAuth.label="他人可读/编辑/评论"},showrenameDocDialog:function(e){this.renameDocDialogVisible=!0,this.renameDocForm.userId=e},shareDocDialogClosed:function(){this.shareDocDialogVisible=!1,this.$refs.shareDocFormRef.resetFields()},setAuthDialogClosed:function(){this.setAuthDialogVisible=!1,this.docAuth.status=0,this.docAuth.label=""},handleSizeChange:function(e){this.docListInfo.pageSize=e},handleCurrentChange:function(e){this.docListInfo.pageNum=e,this.getDesktop()},renameDocDialogClosed:function(){this.$refs.renameDocFormRef.resetFields()}}},U=Q,W=(n("79f6"),Object(c["a"])(U,H,q,!1,null,"274fe190",null)),G=W.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("h3",[e._v("回收站")]),a("el-button",{staticClass:"clear",on:{click:function(t){e.deleteAllDialogVisible=!0}}},[e._v("清空回收站")]),a("div",{staticClass:"switchbtns"},[a("el-button-group",[a("el-tooltip",{attrs:{content:"块状显示",placement:"bottom",effect:"light"}},[a("el-button",{attrs:{icon:"el-icon-menu"},on:{click:function(t){e.isListShow=!1}}})],1),a("el-tooltip",{attrs:{content:"列表显示",placement:"bottom",effect:"light"}},[a("el-button",{attrs:{icon:"el-icon-s-unfold"},on:{click:function(t){e.isListShow=!0}}})],1)],1)],1)],1),e.isListShow&&this.docListInfo.total>0?a("div",{staticClass:"doclist"},[a("el-table",{attrs:{data:e.docList,"default-sort":{prop:"title",order:"ascending"},"max-height":"600px"}},[a("el-table-column",{attrs:{prop:"title",label:"文件名",sortable:"",width:"400",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{prop:"nickname",label:"删除时间",width:"200",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",[a("el-button",{staticClass:"morebtn",attrs:{size:"mini",icon:"el-icon-more",circle:""}}),a("el-dropdown-menu",{staticClass:"dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(n){return e.restoreFile(t.row)}}},[a("span",[e._v("恢复文件")])]),a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(n){return e.deleteDoc(t.row)}}},[a("span",[e._v("彻底删除")])])],1)],1)]}}],null,!1,3681213737)})],1)],1):e._e(),e.isListShow?e._e():a("div",{staticClass:"docblock"},e._l(e.docList,(function(t){return a("div",{key:t.id},[a("div",{staticClass:"block",on:{click:function(n){return e.openDoc(t)}}},[a("div",[a("img",{staticClass:"img-doc",attrs:{src:n("fa64"),alt:"文档"}})]),a("div",{staticClass:"menu"},[a("span",{attrs:{id:"title"}},[e._v(e._s(t.title))]),a("div",{staticClass:"info"},[a("div",[a("span",[e._v("删除时间")])]),a("div",[a("span",[e._v(e._s(t.updatetime))])])])]),a("el-dropdown",[a("el-button",{staticClass:"morebtn",staticStyle:{transform:"rotate(90deg)"},attrs:{icon:"el-icon-more"}}),a("el-dropdown-menu",{staticClass:"dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(n){return e.restoreFile(t)}}},[a("span",[e._v("恢复文件")])]),a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(n){return e.deleteDoc(t)}}},[a("span",[e._v("删除")])])],1)],1)],1)])})),0),a("el-dialog",{attrs:{title:"确认清空回收站",visible:e.deleteAllDialogVisible,width:"500px",center:"","append-to-body":!0},on:{"update:visible":function(t){e.deleteAllDialogVisible=t}}},[a("span",[e._v("这将会删除回收站中所有文件！")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.deleteAllDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.deleteAll}},[e._v("确 定")])],1)]),this.docListInfo.total>0?a("div",[a("el-pagination",{attrs:{"current-page":e.docListInfo.pageNum,"page-size":12,layout:"total, prev, pager, next, jumper",total:e.docListInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)},Y=[],Z={components:{},data:function(){return{docListInfo:{query:"",type:0,pageNum:1,total:0},docList:[{id:1,isFavorite:!0,title:"文档名2",nickname:"王小虎1",createtime:"05-02 10：12",updatetime:"05-02 10：12",lasteditor_nickname:"王小2"}],deleteAllDialogVisible:!1,isListShow:!1}},created:function(){this.getTrash()},methods:{getTrash:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=window.sessionStorage.getItem("token"),a=e.docListInfo.pageNum,t.next=4,e.$http.get("/doc/bin/?token="+n+"&page="+a);case 4:s=t.sent,o=s.data,e.docList=o,console.log(o),e.docListInfo.total=e.docList[0].total;case 9:case"end":return t.stop()}}),t)})))()},deleteAll:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.deleteAllDialogVisible=!1,n=window.sessionStorage.getItem("token"),t.next=4,e.$http.patch("/doc/bin/?token="+n);case 4:return a=t.sent,s=a.data,"成功"===s?e.$message.success("成功清空回收站"):e.$message.error("清空回收站失败"),o=e.docListInfo.pageNum,t.next=10,e.$http.get("/doc/bin/?token="+n+"&page="+o);case 10:r=t.sent,i=r.data,e.docList=i,e.docListInfo.total=0;case 14:case"end":return t.stop()}}),t)})))()},restoreFile:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r,i,c,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=window.sessionStorage.getItem("token"),s={delete:"0",noweditor:null},n.next=4,t.$http.patch("/doc/"+e.id+"/?token="+a,s);case 4:return o=n.sent,r=o.data,"请先登录"===r||"该文档正在被编辑"===r||"无权限"===r?t.$message.error("恢复失败"):t.$message.success("恢复成功"),i=t.docListInfo.pageNum,n.next=10,t.$http.get("/doc/bin/?token="+a+"&page="+i);case 10:c=n.sent,l=c.data,t.docList=l,t.docListInfo.total=t.docList[0].total;case 14:case"end":return n.stop()}}),n)})))()},deleteDoc:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r,i,c,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=window.sessionStorage.getItem("token"),s={delete:"2",noweditor:null},n.next=4,t.$http.patch("/doc/"+e.id+"/?token="+a,s);case 4:return o=n.sent,r=o.data,"请先登录"===r||"该文档正在被编辑"===r||"无权限"===r?t.$message.error("彻底删除失败"):t.$message.success("彻底删除成功"),i=t.docListInfo.pageNum,n.next=10,t.$http.get("/doc/bin/?token="+a+"&page="+i);case 10:c=n.sent,l=c.data,t.docList=l,t.docListInfo.total=t.docList[0].total;case 14:case"end":return n.stop()}}),n)})))()},handleSizeChange:function(e){this.docListInfo.pageSize=e},handleCurrentChange:function(e){this.docListInfo.pageNum=e,this.getTrash()}}},X=Z,K=(n("63b5"),Object(c["a"])(X,J,Y,!1,null,"34a8e0ca",null)),ee=K.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("div",{staticClass:"welcomebtn",on:{click:e.backDashborad}},[a("div",{attrs:{id:"bars"}}),a("div",{attrs:{id:"bars"}}),a("div",{attrs:{id:"bars"}})]),a("div",{attrs:{id:"triangle-top-left"}}),a("div",{staticClass:"btnsarea"},[a("div",{staticClass:"leftarea"},[a("el-button",{staticClass:"d_newdoc",attrs:{icon:"el-icon-document-add"},on:{click:e.createNewDoc}}),e.showType>1?a("el-button",{staticClass:"choosetemp",on:{click:function(t){e.getTemplate(),e.templateDialogVisible=!0}}},[e._v("选择模板")]):e._e(),e.showType>0?a("el-button",{staticClass:"savetemp",on:{click:e.saveTemplate}},[e._v("保存为模板")]):e._e()],1),a("div",{staticClass:"doctitle"},[a("span",[e._v(e._s(e.docInfo.title))])]),a("div",{staticClass:"rightarea"},[e.showType>0?a("el-dropdown",[a("el-button",{staticClass:"morebtn",attrs:{icon:"el-icon-more"}}),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){e.docInfoDialogVisible=!0}}},[e._v("文档信息")]),e.deletePermission?a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(t){e.deleteDocDialogVisible=!0}}},[e._v("删除")]):e._e()],1)],1):e._e(),e.showType>0?a("el-button",{staticClass:"share",on:{click:e.shareDoc}},[e._v("分享")]):e._e(),2===e.showType?a("el-button",{staticClass:"save",on:{click:e.saveDoc}},[e._v("保存")]):e._e()],1)]),a("div",{staticClass:"navbar"},[a("div",{staticClass:"item"},[a("el-popover",{attrs:{placement:"bottom",width:"260",trigger:"hover",title:"通知"}},[a("el-scrollbar",{staticStyle:{height:"360px"}},e._l(e.messageList,(function(t){return a("div",{key:t.id},[a("span",[e._v(e._s(t.content))]),a("div",[a("span",[e._v(e._s(t.createtime))]),2===t.category?a("div",[a("el-button",{attrs:{icon:"el-icon-check",circle:"",size:"mini"},on:{click:function(n){return e.agreeMessage(t)}}}),a("el-button",{attrs:{icon:"el-icon-close",circle:"",size:"mini"},on:{click:function(n){return e.refuseMessage(t)}}})],1):a("div",[a("el-button",{attrs:{icon:"el-icon-check",circle:"",size:"mini"},on:{click:function(n){return e.readMessage(t)}}})],1)])])})),0),a("el-badge",{attrs:{slot:"reference",value:e.messageInfo.messageNum,max:99,hidden:e.messageInfo.isHidden},slot:"reference"},[a("el-button",{attrs:{id:"bellbtn",icon:"el-icon-bell",circle:""},on:{click:e.getMessage}})],1)],1)],1),a("div",{staticClass:"icon-dropdown"},[a("el-dropdown",[a("el-button",{attrs:{id:"iconbtn",circle:""}},[a("img",{staticClass:"icon",attrs:{src:"http://123.57.67.128:8000"+e.imgsrc,alt:"用户头像"}})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return e.gotoProfile(t)}}},[a("span",[e._v("账号设置")])]),a("el-dropdown-item",{nativeOn:{click:function(t){return e.gotoWelcome(t)}}},[a("span",[e._v("前往官网")])]),a("el-dropdown-item",{nativeOn:{click:function(t){return e.getHelp(t)}}},[a("span",[e._v("获取帮助")])]),a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(t){return e.logout(t)}}},[a("span",[e._v("退出登录")])])],1)],1)],1)]),a("div",{attrs:{id:"triangle-top-right"}})]),1===e.showType?a("div",{staticClass:"cover toobar-cover"},[a("div",{staticClass:"remind"},[e._v("您目前处于浏览模式")]),a("div",[a("el-button",{staticClass:"switch",on:{click:e.editMode}},[a("img",{attrs:{src:n("0bb0"),alt:"switch"}}),a("p",[e._v("切换为编辑模式")])])],1)]):2===e.showType?a("div",{staticClass:"cover"},[a("div",{staticClass:"remind"},[e._v("您目前处于编辑模式")]),a("div",[a("el-button",{staticClass:"switch",on:{click:e.checkMode}},[a("img",{attrs:{src:n("0bb0"),alt:"switch"}}),a("p",[e._v("切换为浏览模式")])])],1),a("div",{staticClass:"toolbar-cover"})]):a("div",{staticClass:"na-div"},[a("img",{staticClass:"warn-icon",attrs:{src:n("c2b0"),alt:"lock"}}),a("div",{staticClass:"auth-warn"},[e._v("您没有阅读此文档的权限")])]),a("el-main",[e.showType>0?a("div",[a("div",{staticClass:"paper"},[a("div",{staticClass:"editarea"},[a("div",{staticClass:"titlebar"},[1===e.showType?a("h2",[e._v(e._s(e.docInfo.title))]):2===e.showType?a("el-input",{attrs:{placeholder:"请输入标题"},on:{change:e.changeDocTitle},model:{value:e.newTitle,callback:function(t){e.newTitle=t},expression:"newTitle"}}):e._e()],1),a("div",[a("quill-editor",{ref:"QuillEditor",attrs:{options:e.quillOption},on:{blur:function(t){return e.onEditorBlur(t)},focus:function(t){return e.onEditorFocus(t)}},model:{value:e.docInfo.content,callback:function(t){e.$set(e.docInfo,"content",t)},expression:"docInfo.content"}})],1)])])]):e._e(),a("div",{staticClass:"footer"},[a("span",[e._v(e._s(e.showType>0?"编写于":""))]),a("span",[e._v("黑石文档")])]),1===e.showType?a("div",{staticClass:"comment-frame"},[a("div",[a("h3",[e._v("评论")])]),a("div",{staticClass:"comment-container"},[a("div",{staticClass:"comment-input"},[a("img",{attrs:{src:"http://123.57.67.128:8000"+e.imgsrc,alt:"用户头像"}}),a("el-input",{attrs:{type:"textarea",placeholder:"写下你的评论"},on:{input:function(t){return e.change(t)}},model:{value:e.comments,callback:function(t){e.comments=t},expression:"comments"}}),a("el-button",{on:{click:e.postComment}},[e._v("发布")])],1),e._l(e.commentList,(function(t){return a("div",{key:t.id,staticClass:"inner-frame"},[a("div",{staticClass:"cutline"}),a("div",{staticClass:"user-comment"},[a("div",{staticClass:"user-info"},[a("img",{attrs:{src:"http://123.57.67.128:8000"+t.commenter.image,alt:"用户头像"},on:{click:function(n){return e.jumpto(t.commenter.id)}}})]),a("div",{staticClass:"comments"},[a("div",{staticClass:"user-id"},[e._v(e._s(t.nickname))]),a("div",{staticClass:"comment-content"},[e._v(e._s(t.content))]),a("div",{staticClass:"commenttime"},[e._v(e._s(t.createtime))])])])])})),a("div",{staticClass:"cutline"})],2)]):e._e()]),a("el-dialog",{attrs:{title:"我的模板",visible:e.templateDialogVisible,width:"1000px"},on:{"update:visible":function(t){e.templateDialogVisible=t}}},[a("el-table",{attrs:{data:e.templateList,"max-height":"350","default-sort":{prop:"name",order:"ascending"}}},[a("el-table-column",{attrs:{prop:"name",label:"文件名",sortable:"",width:"200",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{prop:"id",label:"模板ID",sortable:"",width:"150",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{prop:"creater.nickname",label:"创建者",sortable:"",width:"200",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间",sortable:"",width:"200",align:"center","header-align":"center"}}),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"tempbtn",attrs:{size:"small"},on:{click:function(n){return e.useTemplate(t.row)}}},[a("span",[e._v("使用模板")])]),a("el-button",{staticClass:"tempbtn",attrs:{size:"small"},on:{click:function(n){return e.deleteTemplate(t.row)}}},[a("span",[e._v("删除模板")])])]}}])})],1)],1),a("el-dialog",{staticClass:"sharelink",attrs:{title:"分享文档链接",visible:e.shareDocDialogVisible,width:"500px"},on:{"update:visible":function(t){e.shareDocDialogVisible=t}}},[a("el-input",{attrs:{placeholder:"文档链接"},model:{value:e.shareDocForm.url,callback:function(t){e.$set(e.shareDocForm,"url",t)},expression:"shareDocForm.url"}})],1),a("el-dialog",{attrs:{title:"文档信息",visible:e.docInfoDialogVisible,width:"600px"},on:{"update:visible":function(t){e.docInfoDialogVisible=t}}},[a("div",{staticClass:"infolog"},[a("h4",[e._v("文档ID")]),a("span",[e._v(e._s(e.docInfo.id))]),a("h4",[e._v("创建者")]),a("span",[e._v(e._s(e.docInfo.author.nickname))]),a("h4",[e._v("最后编辑者")]),a("span",[e._v(e._s(e.docInfo.lasteditor.nickname))]),a("h4",[e._v("最后编辑时间")]),a("span",[e._v(e._s(e.docInfo.updatetime))])])]),a("el-dialog",{staticClass:"deletelog",attrs:{title:"确认删除当前文件",visible:e.deleteDocDialogVisible,width:"500px",center:""},on:{"update:visible":function(t){e.deleteDocDialogVisible=t}}},[a("span",[e._v("这将会删除当前文件!")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.deleteDocDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{on:{click:e.deleteDoc}},[e._v("确 定")])],1)])],1)},ne=[],ae=n("953d"),se=n.n(ae),oe={action:"http://123.57.67.128:8000/upload/",methods:"POST",name:"img",size:500,accept:"image/png, image/gif, image/jpeg, image/bmp, image/x-icon"},re=[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]],ie={image:function(){var e=this,t=this.container.querySelector("input.ql-image[type=file]");null===t&&(t=document.createElement("input"),t.setAttribute("type","file"),oe.name&&t.setAttribute("name",oe.name),t.setAttribute("accept",oe.accept),t.classList.add("ql-image"),t.addEventListener("change",(function(){var n=new FormData;n.append(oe.name,t.files[0]),n.append("object","product"),oe.token&&n.append("token",oe.token);var a=new XMLHttpRequest;a.open(oe.methods,oe.action,!0),a.onload=function(n){if(200===a.status){var s=JSON.parse(a.responseText),o="http://123.57.67.128:8000"+s.url,r=e.quill.getSelection(!0).index;e.quill.insertEmbed(r,"image",o),e.quill.setSelection(r+1),console.log(o)}t.value=""},a.upload.onloadstart=function(e){t.value=""},a.upload.onerror=function(e){},a.upload.onloadend=function(e){},a.send(n)})),this.container.appendChild(t)),t.click()}},ce={placeholder:"",theme:"snow",modules:{toolbar:{container:re,handlers:ie}}},le=n("9339"),ue=["SimSun","SimHei","Microsoft-YaHei","KaiTi","FangSong","Arial","Times-New-Roman","sans-serif"],de=le["import"]("formats/font");de.whitelist=ue,le["register"](de,!0);var me={components:{quillEditor:ae["quillEditor"]},data:function(){return{imgsrc:"",userId:"",showType:0,deletePermission:!0,docInfo:{id:12123,auth:0,author:{},lasteditor:{},createtime:"",updatetime:"",title:"",content:"",group:null},messageInfo:{messageNum:"",isHidden:!1},messageList:[],commentList:[{id:1,nickname:"",content:"",createtime:""},{id:2,nickname:"",content:"",createtime:""}],templateList:[{id:1,name:"",content:"",createtime:"",creater:{id:1,nickname:""}}],newTitle:"",shareDocForm:{url:""},comments:"",templateDialogVisible:!1,shareDocDialogVisible:!1,docInfoDialogVisible:!1,deleteDocDialogVisible:!1,quillOption:ce}},created:function(){this.getImgsrc(),this.getDocInfo(),this.getComment(),this.getMessage(),this.getEditorId()},methods:{gotoProfile:function(){this.$router.push("/profile")},getEditorId:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=window.sessionStorage.getItem("token"),t.next=3,e.$http.get("/user/?token="+n);case 3:a=t.sent,s=a.data,e.userId=s.id;case 6:case"end":return t.stop()}}),t)})))()},jumpto:function(e){this.$router.push("/profile/"+e)},backDashborad:function(){this.saveDoc(),this.$router.push("/home")},getImgsrc:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=window.sessionStorage.getItem("token"),t.next=3,e.$http.get("/user/?token="+n);case 3:a=t.sent,s=a.data,e.imgsrc=s.image;case 6:case"end":return t.stop()}}),t)})))()},createNewDoc:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o,r,i,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$route.params.id,a=window.sessionStorage.getItem("token"),s={content:e.docInfo.content,title:e.docInfo.title,noweditor:null},t.next=5,e.$http.patch("/doc/"+n+"/?token="+a,s);case 5:return o=t.sent,r=o.data,"请先登录"===r||"该文档正在被编辑"===r||"无权限"===r?e.$message.error("保存失败"):e.$message.success("保存成功"),i={title:"无标题",auth:"0"},t.next=11,e.$http.post("/doc/?token="+a,i);case 11:c=t.sent,l=c.data,"请先登录"===l?e.$message.error("创建失败"):(e.$router.push("/doc/"+l.id),e.getDocInfo());case 14:case"end":return t.stop()}}),t)})))()},saveDoc:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=window.sessionStorage.getItem("token"),a=e.$route.params.id,s={content:e.docInfo.content,title:e.docInfo.title,noweditor:null},t.next=5,e.$http.patch("/doc/"+a+"/?token="+n,s);case 5:o=t.sent,r=o.data,"请先登录"===r||"该文档正在被编辑"===r||"无权限"===r?e.$message.error("保存失败"):(e.$message.success("保存成功"),e.showType=1);case 8:case"end":return t.stop()}}),t)})))()},getDocInfo:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=window.sessionStorage.getItem("token"),a=e.$route.params.id,t.next=4,e.$http.get("/doc/"+a+"/?token="+n);case 4:s=t.sent,o=s.data,"请先登录"===o||"无权限"===o?(e.$message.error(o),e.showType=0):(e.docInfo=o,e.showType=1,e.newTitle=e.docInfo.title);case 7:case"end":return t.stop()}}),t)})))()},shareDoc:function(){var e=window.location.href;this.shareDocForm.url=e,this.shareDocDialogVisible=!0},setAccount:function(){this.$router.push("/profile")},gotoWelcome:function(){this.$router.push("/")},getHelp:function(){this.$router.push("/help")},logout:function(){window.sessionStorage.removeItem("token"),this.$router.push("/")},deleteDoc:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=window.sessionStorage.getItem("token"),a=e.$route.params.id,s={delete:"1",noweditor:null},t.next=5,e.$http.patch("/doc/"+a+"/?token="+n,s);case 5:o=t.sent,r=o.data,"请先登录"===r||"该文档正在被编辑"===r||"无权限"===r?e.$message.error("删除失败"):e.$message.success("删除成功"),e.$router.push("/desktop");case 9:case"end":return t.stop()}}),t)})))()},getTemplate:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=window.sessionStorage.getItem("token"),t.next=3,e.$http.get("/module/?token="+n);case 3:a=t.sent,s=a.data,null===s?e.$message.error("列表为空"):e.templateList=s;case 6:case"end":return t.stop()}}),t)})))()},saveTemplate:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=window.sessionStorage.getItem("token"),a={name:e.docInfo.title,content:e.docInfo.content},t.next=4,e.$http.post("/module/?token="+n,a);case 4:return s=t.sent,o=s.data,null===o?e.$message.error("列表为空"):e.$message.success("储存成功"),t.next=9,e.$http.get("/module/?token="+n);case 9:r=t.sent,i=r.data,e.templateList=i,null===i&&e.$message.error("列表为空");case 13:case"end":return t.stop()}}),t)})))()},checkTemplate:function(){},useTemplate:function(e){this.docInfo.title=e.name,this.docInfo.content=e.content,this.templateDialogVisible=!1,this.$message.success("成功启用模板")},deleteTemplate:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=window.sessionStorage.getItem("token"),n.next=3,t.$http.delete("/module/"+e.id+"/?token="+a);case 3:return s=n.sent,o=s.data,"成功"===o?t.$message.success("删除成功"):t.$message.error("删除失败"),n.next=8,t.$http.get("/module/?token="+a);case 8:r=n.sent,i=r.data,t.templateList=i,null===i&&t.$message.error("列表为空");case 12:case"end":return n.stop()}}),n)})))()},readMessage:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=window.sessionStorage.getItem("token"),s=e.id,o={status:0},n.next=5,t.$http.patch("/message/"+s+"/?token="+a,o);case 5:r=n.sent,i=r.data,"成功"===i?(t.$message.success("消息已读"),t.getMessage()):t.$message.error(i);case 8:case"end":return n.stop()}}),n)})))()},agreeMessage:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.group,s=window.sessionStorage.getItem("token"),o={user_id:e.senduser,decision:!0},n.next=5,t.$http.put("/group/"+a+"/?token="+s,o);case 5:r=n.sent,i=r.data,"成功"===i?(t.$message.success("该用户已加入您的团队"),t.readMessage(e)):t.$message.err(i);case 8:case"end":return n.stop()}}),n)})))()},refuseMessage:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.group,s=window.sessionStorage.getItem("token"),o={user_id:e.senduser,decision:!1},n.next=5,t.$http.put("/group/"+a+"/?token="+s,o);case 5:r=n.sent,i=r.data,"成功"===i?(t.$message.success("已拒绝此申请"),t.readMessage(e)):t.$message.err(i);case 8:case"end":return n.stop()}}),n)})))()},getMessage:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.messageList=[],e.messageInfo.messageNum="",n=window.sessionStorage.getItem("token"),t.next=5,e.$http.get("/message/?token="+n);case 5:a=t.sent,s=a.data,e.messageInfo.messageNum=s[0].count,e.messageList=s;case 9:case"end":return t.stop()}}),t)})))()},authorityJudge:function(){},editMode:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o,r,i,c,l,u,d,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=window.sessionStorage.getItem("token"),t.next=3,e.$http.get("/user/?token="+n);case 3:if(a=t.sent,s=a.data,e.userId=s.id,o=e.$route.params.id,e.getDocInfo(),r=!1,i={noweditor:e.userId},console.log(e.userId),console.log(e.docInfo.noweditor),null===e.docInfo.noweditor){t.next=19;break}if(e.docInfo.noweditor.id!==e.userId){t.next=17;break}r=!0,t.next=19;break;case 17:return e.$message.error("正在被人编辑"),t.abrupt("return");case 19:if(!(e.docInfo.auth<3)){t.next=31;break}if(!e.docInfo.hasAuth){t.next=24;break}r=!0,t.next=29;break;case 24:return t.next=26,e.$http.get("/group/user/?token="+n);case 26:for(c=t.sent,l=c.data,u=0;u<l.length;u++)console.log(l[u].id),l[u].id===e.docInfo.group.id&&(r=!0);case 29:t.next=32;break;case 31:r=!0;case 32:if(r){t.next=35;break}return e.$message.error("正在被人编辑"),t.abrupt("return");case 35:return t.next=37,e.$http.patch("/doc/"+o+"/?token="+n,i);case 37:d=t.sent,m=d.data,"请先登录"!==m&&"无权限"!==m&&(e.showType=2,e.$message.success("切换至编辑模式成功"));case 40:case"end":return t.stop()}}),t)})))()},checkMode:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.saveDoc(),n=window.sessionStorage.getItem("token"),a=e.$route.params.id,s={noweditor:null},t.next=6,e.$http.patch("/doc/"+a+"/?token="+n,s);case 6:o=t.sent,r=o.data,"请先登录"!==r&&"无权限"!==r&&(e.showType=1,e.$message.success("切换至浏览模式成功"));case 9:case"end":return t.stop()}}),t)})))()},changeDocTitle:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=window.sessionStorage.getItem("token"),a=e.$route.params.id,s={title:e.newTitle,noweditor:null},t.next=5,e.$http.patch("/doc/"+a+"/?token="+n,s);case 5:o=t.sent,r=o.data,"请先登录"===r||"该文档正在被编辑"===r||"无权限"===r?e.$message.error("重命名失败"):e.$message.success("重命名成功"),e.getDocInfo();case 9:case"end":return t.stop()}}),t)})))()},onEditorBlur:function(e){1===this.showType?e.enable(!1):e.enable(!0)},onEditorFocus:function(e){1===this.showType?e.enable(!1):e.enable(!0)},postComment:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.comments){t.next=3;break}return e.$message.error("评论不可为空"),t.abrupt("return");case 3:return n=window.sessionStorage.getItem("token"),a=e.$route.params.id,s={content:e.comments},t.next=8,e.$http.post("/comment/"+a+"/?token="+n,s);case 8:o=t.sent,r=o.data,"请先登录"===r||"无权限"===r?e.$message.error(r):(e.$message.success("评论成功"),e.getComment()),e.comments="";case 12:case"end":return t.stop()}}),t)})))()},getComment:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.commentList=[],n=e.$route.params.id,a=window.sessionStorage.getItem("token"),t.next=5,e.$http.get("/comment/"+n+"/?token="+a);case 5:s=t.sent,o=s.data,e.commentList=o;case 8:case"end":return t.stop()}}),t)})))()}}},pe=me,ge=(n("15df"),n("0426"),Object(c["a"])(pe,te,ne,!1,null,"80122dbc",null)),he=ge.exports,fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("h3",[e._v(e._s(e.teamInfo.teamName))]),a("div",[a("el-button",{staticClass:"spaceinfo",on:{click:function(t){e.teamInfoDialogVisible=!0}}},[e._v("团队信息")])],1),e.teamInfo.isManager?a("div",[a("el-button",{staticClass:"manage",on:{click:function(t){e.manageTeamDialogVisible=!0}}},[e._v("管理团队")])],1):e._e(),e.teamInfo.isManager?e._e():a("div",[a("el-button",{staticClass:"manage",on:{click:function(t){e.quitTeamDialogVisible=!0}}},[e._v("退出团队")])],1),a("div",{staticClass:"switchbtns"},[a("el-button-group",[a("el-tooltip",{attrs:{content:"块状显示",placement:"bottom",effect:"light"}},[a("el-button",{attrs:{icon:"el-icon-menu"},on:{click:function(t){e.isListShow=!1}}})],1),a("el-tooltip",{attrs:{content:"列表显示",placement:"bottom",effect:"light"}},[a("el-button",{attrs:{icon:"el-icon-s-unfold"},on:{click:function(t){e.isListShow=!0}}})],1)],1)],1)]),e.isListShow&&this.docListInfo.total>0?a("div",{staticClass:"doclist"},[a("el-table",{attrs:{data:e.docList,"default-sort":{prop:"title",order:"ascending"},"max-height":"600px"}},[a("el-table-column",{attrs:{prop:"title",label:"文件名",sortable:"",width:"180",align:"left","header-align":"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"docname",attrs:{type:"text",circle:""},nativeOn:{click:function(n){return e.openDoc(t.row)}}},[e._v(e._s(t.row.title))])]}}],null,!1,1526350890)}),a("el-table-column",{attrs:{prop:"nickname",label:"创建者",width:"160",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间",sortable:"",width:"200",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{prop:"updatetime",label:"最后编辑时间",sortable:"",width:"200",align:"center","header-align":"right"}}),a("el-table-column",{attrs:{prop:"lasteditor_nickname",label:"最后编辑者",width:"200",align:"center","header-align":"center"}}),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"favbtn",attrs:{size:"mini",icon:t.row.isFavorite?"el-icon-star-on":"el-icon-star-off",circle:""},nativeOn:{click:function(n){return e.changeFavState(t.row)}}}),a("el-dropdown",[a("el-button",{staticClass:"morebtn",attrs:{size:"mini",icon:"el-icon-more",circle:""}}),a("el-dropdown-menu",{staticClass:"dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(n){return e.shareDoc(t.row)}}},[a("span",[e._v("分享")])]),t.row.hasAuth?a("el-dropdown-item",{nativeOn:{click:function(n){return e.showSetAuthDialog(t.row)}}},[a("span",[e._v("设置权限")])]):e._e(),a("el-dropdown-item",{nativeOn:{click:function(n){return e.changeFavState(t.row)}}},[a("span",[e._v(e._s(t.row.isFavorite?"取消收藏":"收藏"))])]),a("el-dropdown-item",{nativeOn:{click:function(n){return e.showrenameDocDialog(t.row.id)}}},[a("span",[e._v("重命名")])]),a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(n){return e.deleteDoc(t.row)}}},[a("span",[e._v("删除")])])],1)],1)]}}],null,!1,510975792)})],1)],1):e._e(),!e.isListShow&&this.docListInfo.total>0?a("div",{staticClass:"docblock"},e._l(e.docList,(function(t){return a("div",{key:t.id},[a("div",{staticClass:"block",on:{click:function(n){return e.openDoc(t)}}},[a("div",[a("img",{staticClass:"img-doc",attrs:{src:n("fa64"),alt:"文档"}})]),a("div",{staticClass:"menu"},[a("span",{attrs:{id:"title"}},[e._v(e._s(t.title))]),a("div",{staticClass:"info"},[a("div",[a("span",[e._v("最后于")]),a("span",[e._v(e._s(t.updatetime))])]),a("div",[a("span",[e._v("由")]),a("span",[e._v(e._s(t.lasteditor_nickname))]),a("span",[e._v("编辑")])])])]),a("el-dropdown",[a("el-button",{staticClass:"morebtn",staticStyle:{transform:"rotate(90deg)"},attrs:{icon:"el-icon-more"}}),a("el-dropdown-menu",{staticClass:"dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(n){return e.shareDoc(t)}}},[a("span",[e._v("分享")])]),t.hasAuth?a("el-dropdown-item",{nativeOn:{click:function(n){return e.showSetAuthDialog(t)}}},[a("span",[e._v("设置权限")])]):e._e(),a("el-dropdown-item",{nativeOn:{click:function(n){return e.changeFavState(t)}}},[a("span",[e._v(e._s(t.isFavorite?"取消收藏":"收藏"))])]),a("el-dropdown-item",{nativeOn:{click:function(n){return e.showrenameDocDialog(t.id)}}},[a("span",[e._v("重命名")])]),a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(n){return e.deleteDoc(t)}}},[a("span",[e._v("删除")])])],1)],1)],1)])})),0):e._e(),a("el-dialog",{staticClass:"infolog",attrs:{title:"团队信息",visible:e.teamInfoDialogVisible,width:"800px","append-to-body":!0},on:{"update:visible":function(t){e.teamInfoDialogVisible=t}}},[a("div",[a("span",[e._v("管理者："+e._s(e.teamInfo.teamCreator))])]),a("div",{staticClass:"membership"},[a("el-table",{attrs:{data:e.teamInfo.memberList,"max-height":"350"}},[a("el-table-column",{attrs:{prop:"nickname",label:"昵称",sortable:"",width:"200",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名",sortable:"",width:"200",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱",sortable:"",align:"center","header-align":"center"}})],1)],1)]),a("el-dialog",{staticClass:"manalog",attrs:{title:"管理团队",visible:e.manageTeamDialogVisible,width:"1000px","append-to-body":!0},on:{"update:visible":function(t){e.manageTeamDialogVisible=t}}},[a("div",{staticClass:"manalog-inner"},[a("el-button",{staticClass:"disband",on:{click:function(t){e.dissolveTeamDialogVisible=!0}}},[e._v("解散团队")]),a("div",{staticClass:"membership"},[a("el-table",{attrs:{data:e.teamInfo.memberList,"max-height":"350","default-sort":{prop:"nickname",order:"ascending"}}},[a("el-table-column",{attrs:{prop:"nickname",label:"昵称",sortable:"",width:"200",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名",sortable:"",width:"200",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱",sortable:"",width:"350",align:"center","header-align":"center"}}),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"removebtn",attrs:{size:"mini"},on:{click:function(n){return e.removeMember(t.row)}}},[e._v("移出团队")])]}}])})],1)],1)],1)]),a("el-dialog",{staticClass:"disbandlog",attrs:{title:"确认退出团队",visible:e.quitTeamDialogVisible,width:"500px",center:"","append-to-body":!0},on:{"update:visible":function(t){e.quitTeamDialogVisible=t}}},[a("span",[e._v("确认退出团队")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.quitTeamDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.quitTeam}},[e._v("确 定")])],1)]),a("el-dialog",{staticClass:"disbandlog",attrs:{title:"确认解散团队",visible:e.dissolveTeamDialogVisible,width:"500px",center:"","append-to-body":!0},on:{"update:visible":function(t){e.dissolveTeamDialogVisible=t}}},[a("span",[e._v("这将会删除所有队员并丢失团队空间中所有文件！")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dissolveTeamDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.dissolveTeam}},[e._v("确 定")])],1)]),a("el-dialog",{staticClass:"defaultlog",attrs:{title:"分享文档链接",visible:e.shareDocDialogVisible,width:"500px","append-to-body":!0},on:{"update:visible":function(t){e.shareDocDialogVisible=t},close:e.shareDocDialogClosed}},[a("el-input",{attrs:{placeholder:"文档链接"},model:{value:e.shareDocForm.url,callback:function(t){e.$set(e.shareDocForm,"url",t)},expression:"shareDocForm.url"}})],1),a("el-dialog",{attrs:{title:"设置文档权限",visible:e.setAuthDialogVisible,width:"500px","append-to-body":!0},on:{"update:visible":function(t){e.setAuthDialogVisible=t},close:e.setAuthDialogClosed}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.docAuth.label,callback:function(t){e.$set(e.docAuth,"label",t)},expression:"docAuth.label"}},e._l(e.authList,(function(t){return a("el-option",{key:t.auth,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.label))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.value))])])})),1),a("el-button",{on:{click:e.setAuth}},[e._v("确 定")])],1),a("el-dialog",{staticClass:"defaultlog",attrs:{title:"重命名文档",visible:e.renameDocDialogVisible,width:"600px","append-to-body":!0},on:{"update:visible":function(t){e.renameDocDialogVisible=t},close:e.renameDocDialogClosed}},[a("el-form",{ref:"renameDocFormRef",attrs:{model:e.renameDocForm}},[a("el-form-item",{attrs:{prop:"newName"}},[a("el-input",{attrs:{placeholder:"文档名称"},model:{value:e.renameDocForm.newName,callback:function(t){e.$set(e.renameDocForm,"newName",t)},expression:"renameDocForm.newName"}})],1)],1),a("el-button",{on:{click:e.renameDoc}},[e._v("确 定")])],1),this.docListInfo.total>0?a("div",[a("el-pagination",{attrs:{"current-page":e.docListInfo.pageNum,"page-size":2,layout:"total, prev, pager, next, jumper",total:e.docListInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)},ve=[],we={components:{},data:function(){return{teamInfo:{teamId:"1",teamName:"123123",teamCreator:"顺丰到付",isManager:!1,memberList:[{id:1,nickname:"user1",username:"user1",email:"user1@qq.com"}]},docListInfo:{query:"",type:0,pageNum:1,total:32},docList:[{id:1,isFavorite:!0,title:"文档名2",nickname:"王小虎1",createtime:"05-02 10：12",updatetime:"05-02 10：12",lasteditor_nickname:"王小2"},{id:3,isFavorite:!1,title:"文档名4",nickname:"王小虎2",createtime:"05-02 10：12",updatetime:"05-02 10：41",lasteditor_nickname:"王小3"},{id:2,isFavorite:!1,title:"文档名1",nickname:"王小虎3",createtime:"05-02 10：12",updatetime:"05-02 10：51",lasteditor_nickname:"王小4"},{id:6,isFavorite:!0,title:"文档名3",nickname:"王小虎4",createtime:"05-02 10：12",updatetime:"05-02 10：01",lasteditor_nickname:"王小1"}],shareDocForm:{url:""},docAuth:{docId:0,auth:0,label:""},renameDocForm:{userId:"",newName:""},teamInfoDialogVisible:!1,setAuthDialogVisible:!1,manageTeamDialogVisible:!1,quitTeamDialogVisible:!1,dissolveTeamDialogVisible:!1,shareDocDialogVisible:!1,renameDocDialogVisible:!1,isListShow:!1,authList:[{auth:0,value:"仅自己可以查看",label:"私密文档"},{auth:1,value:"其他人可以查看，但不能编辑或评论",label:"他人可读"},{auth:2,value:"其他人可以查看或评论，但不能编辑",label:"他人可读/评论"},{auth:3,value:"其他人可以查看、评论、编辑",label:"他人可读/编辑/评论"}]}},created:function(){this.getTeamInfo(),this.getTeamDoc()},watch:{$route:function(e,t){this.getTeamInfo(),this.getTeamDoc()}},methods:{getTeamInfo:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=window.sessionStorage.getItem("token"),a=e.$route.params.id,t.next=4,e.$http.get("/group/"+a+"/?token="+n);case 4:s=t.sent,o=s.data,e.teamInfo.memberList=o.member,e.teamInfo.teamCreator=o.leader.nickname,e.teamInfo.isManager=o.isManager,e.teamInfo.teamName=o.name;case 10:case"end":return t.stop()}}),t)})))()},getTeamDoc:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.docList=[],e.docListInfo.total=0,n=window.sessionStorage.getItem("token"),a=e.docListInfo.pageNum,s=e.$route.params.id,t.next=7,e.$http.get("/doc/group/"+s+"/?token="+n+"&page="+a);case 7:o=t.sent,r=o.data,e.docList=r,e.docListInfo.total=e.docList[0].total;case 11:case"end":return t.stop()}}),t)})))()},dissolveTeam:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$route.params.id,a=window.sessionStorage.getItem("token"),t.next=4,e.$http.delete("/group/"+n+"/?token="+a);case 4:s=t.sent,o=s.data,"解散成功"===o?e.$message.success("解散成功"):e.$message.error("解散失败"),e.$router.push("/dashboard");case 8:case"end":return t.stop()}}),t)})))()},removeMember:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.$route.params.id,s=window.sessionStorage.getItem("token"),n.next=4,t.$http.put("/group/"+a+"/member/"+e.id+"/?token="+s);case 4:return o=n.sent,r=o.data,"成功"===r?t.$message.success("移除成功"):t.$message.error("移除失败"),n.next=9,t.$http.get("/group/"+a+"/?token="+s);case 9:i=n.sent,c=i.data,"请先登录"!==c&&"该文档正在被编辑"!==c&&"无权限"!==c||t.$message.error("获取列表失败"),t.teamInfo.memberList=c.member,t.teamInfo.teamCreator=c.leader.nickname;case 14:case"end":return n.stop()}}),n)})))()},quitTeam:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=window.sessionStorage.getItem("token"),a=e.$route.params.id,t.next=4,e.$http.delete("/group/"+a+"/member/?token="+n);case 4:s=t.sent,o=s.data,"成功"===o?(e.$message.success("退出成功"),e.quitTeamDialogVisible=!1,e.$router.push("/dashboard")):e.$message.error("退出失败");case 7:case"end":return t.stop()}}),t)})))()},setAuth:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return"仅自己可以查看"===e.docAuth.label?e.docAuth.auth=0:"其他人可以查看，但不能编辑或评论"===e.docAuth.label?e.docAuth.auth=1:"其他人可以查看或评论，但不能编辑"===e.docAuth.label?e.docAuth.auth=2:e.docAuth.auth=3,n=window.sessionStorage.getItem("token"),a={auth:e.docAuth.auth,noweditor:null},t.next=5,e.$http.patch("/doc/"+e.docAuth.docId+"/?token="+n,a);case 5:s=t.sent,o=s.data,"请先登录"===o||"无权限"===o||"该文档正在被编辑"===o?e.$message.error(o):(e.$message.success("权限更改成功"),e.setAuthDialogVisible=!1);case 8:case"end":return t.stop()}}),t)})))()},openDoc:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$router.push("/doc/"+e.id);case 1:case"end":return n.stop()}}),n)})))()},shareDoc:function(e){var t=window.location.href.replace("space","doc");this.shareDocForm.url=t,this.shareDocDialogVisible=!0},changeFavState:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r,i,c,l,u,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=window.sessionStorage.getItem("token"),!0!==e.isFavorite){n.next=9;break}return n.next=4,t.$http.delete("/favorite/"+e.id+"/?token="+a);case 4:s=n.sent,o=s.data,"成功"===o?t.$message.success("取消收藏成功"):t.$$message.error("取消收藏失败"),n.next=14;break;case 9:return n.next=11,t.$http.put("/favorite/"+e.id+"/?token="+a);case 11:r=n.sent,i=r.data,"成功"===i?t.$message.success("收藏成功"):t.$$message.error("收藏失败");case 14:return e.isFavorite=!e.isFavorite,c=t.docListInfo.pageNum,l=t.$route.params.id,n.next=19,t.$http.get("/doc/group/"+l+"/?token="+a+"&page="+c);case 19:u=n.sent,d=u.data,"查询结果为空"===d&&t.$message.error("获取列表失败"),t.docList=d,t.docListInfo.total=t.docList[0].total;case 24:case"end":return n.stop()}}),n)})))()},renameDoc:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function e(){var n,a,s,o,r,i,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.renameDocDialogVisible=!1,n=window.sessionStorage.getItem("token"),a={title:t.renameDocForm.newName,noweditor:null},e.next=5,t.$http.patch("/doc/"+t.renameDocForm.userId+"/?token="+n,a);case 5:return s=e.sent,o=s.data,"请先登录"===o||"该文档正在被编辑"===o||"无权限"===o?t.$message.error("重命名失败"):t.$message.success("重命名成功"),r=t.docListInfo.pageNum,i=t.$route.params.id,e.next=12,t.$http.get("/doc/group/"+i+"/?token="+n+"&page="+r);case 12:c=e.sent,l=c.data,t.docList=l,t.docListInfo.total=t.docList[0].total;case 16:case"end":return e.stop()}}),e)})))()},deleteDoc:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r,i,c,l,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=window.sessionStorage.getItem("token"),s={delete:"1",noweditor:null},n.next=4,t.$http.patch("/doc/"+e.id+"/?token="+a,s);case 4:return o=n.sent,r=o.data,"请先登录"===r||"该文档正在被编辑"===r||"无权限"===r?t.$message.error("删除失败"):t.$message.success("删除成功"),i=t.docListInfo.pageNum,c=t.$route.params.id,n.next=11,t.$http.get("/doc/group/"+c+"/?token="+a+"&page="+i);case 11:l=n.sent,u=l.data,t.docList=u,t.docListInfo.total=t.docList[0].total;case 15:case"end":return n.stop()}}),n)})))()},showSetAuthDialog:function(e){this.docAuth.docId=e.id,this.setAuthDialogVisible=!0,this.docAuth.auth=e.auth,0===this.docAuth.auth?this.docAuth.label="私密文档":1===this.docAuth.auth?this.docAuth.label="他人可读":2===this.docAuth.auth?this.docAuth.label="他人可读/评论":this.docAuth.label="他人可读/编辑/评论"},showrenameDocDialog:function(e){this.renameDocDialogVisible=!0,this.renameDocForm.userId=e},shareDocDialogClosed:function(){this.shareDocDialogVisible=!1,this.$refs.shareDocFormRef.resetFields()},setAuthDialogClosed:function(){this.setAuthDialogVisible=!1,this.docAuth.status=0,this.docAuth.label=""},handleSizeChange:function(e){this.docListInfo.pageSize=e},handleCurrentChange:function(e){this.docListInfo.pageNum=e,this.getTeamDoc()},renameDocDialogClosed:function(){this.$refs.renameDocFormRef.resetFields()}}},be=we,ke=(n("4462"),Object(c["a"])(be,fe,ve,!1,null,"608e3133",null)),Ie=ke.exports,xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("img",{staticClass:"background",attrs:{src:"",alt:"background"}}),n("el-header",[n("div",{staticClass:"homebtn",on:{click:e.goHome}},[n("div",{attrs:{id:"bars"}}),n("div",{attrs:{id:"bars"}}),n("div",{attrs:{id:"bars"}})]),n("div",{attrs:{id:"triangle-top-left"}}),n("div",{staticClass:"navbar"},[n("div",{staticClass:"item"},[n("el-popover",{attrs:{placement:"bottom",width:"260",trigger:"hover",title:"通知"}},[n("el-scrollbar",{staticStyle:{height:"360px"}},e._l(e.messageList,(function(t){return n("div",{key:t.id},[n("span",[e._v(e._s(t.content))]),n("div",[n("span",[e._v(e._s(t.createtime))]),2===t.category?n("div",[n("el-button",{attrs:{icon:"el-icon-check",circle:"",size:"mini"},on:{click:function(n){return e.agreeMessage(t)}}}),n("el-button",{attrs:{icon:"el-icon-close",circle:"",size:"mini"},on:{click:function(n){return e.refuseMessage(t)}}})],1):n("div",[n("el-button",{attrs:{icon:"el-icon-check",circle:"",size:"mini"},on:{click:function(n){return e.readMessage(t)}}})],1)])])})),0),n("el-badge",{attrs:{slot:"reference",value:e.messageInfo.messageNum,max:99,hidden:e.messageInfo.isHidden},slot:"reference"},[n("el-button",{attrs:{id:"bellbtn",icon:"el-icon-bell",circle:""},on:{click:e.getMessage}})],1)],1)],1),n("div",{staticClass:"icon-dropdown"},[n("el-dropdown",[n("el-button",{attrs:{id:"iconbtn",circle:""}},[n("img",{staticClass:"icon",attrs:{src:"http://123.57.67.128:8000"+e.myImage,alt:"用户头像"}})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(t){return e.gotoProfile(t)}}},[n("span",[e._v("账号设置")])]),n("el-dropdown-item",{nativeOn:{click:function(t){return e.gotoWelcome(t)}}},[n("span",[e._v("前往官网")])]),n("el-dropdown-item",{nativeOn:{click:function(t){return e.getHelp(t)}}},[n("span",[e._v("获取帮助")])]),n("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(t){return e.logout(t)}}},[n("span",[e._v("退出登录")])])],1)],1)],1)]),n("div",{attrs:{id:"triangle-top-right"}})]),n("el-main",[n("div",{staticClass:"box-card"},[n("div",{staticClass:"avatar"},[e.isSelf?n("el-upload",{attrs:{action:"http://123.57.67.128:8000/upload/","show-file-list":!1,"on-success":e.uploadSuccess,"before-upload":e.beforeAvatarUpload,"on-error":e.uploadError,name:"img",accept:"image/jpeg,image/jpg,image/png"}},[n("img",{attrs:{src:"http://123.57.67.128:8000"+e.userInfo.image,alt:"用户头像"}})]):e._e(),e.isSelf?n("div",{staticClass:"avatar-remind"},[n("span",[e._v("点击头像可修改")]),n("p"),n("span",[e._v("（支持jpg、png格式）")])]):n("div",[n("img",{attrs:{src:"http://123.57.67.128:8000"+e.userInfo.image,alt:"用户头像"}})])],1),n("div",{staticClass:"divide"}),n("div",{staticClass:"info"},[n("div",{staticClass:"nickname"},[n("i",{staticClass:"el-icon-user"}),n("span",[e._v("昵称")]),e.isSelf?n("el-input",{attrs:{placeholder:"用户昵称"},on:{change:e.changeNickname},model:{value:e.userInfo.nickname,callback:function(t){e.$set(e.userInfo,"nickname",t)},expression:"userInfo.nickname"}}):n("span",[e._v(e._s(e.userInfo.nickname))])],1),n("div",{staticClass:"passwd"},[n("i",{staticClass:"el-icon-lock"}),n("span",[e._v("密码")]),n("span",[e._v("•••••••")]),e.isSelf?n("el-button",{attrs:{type:"text"},on:{click:function(t){e.changePasswordDialogVisible=!0}}},[e._v("修改密码")]):e._e()],1),n("div",{staticClass:"emailbox"},[n("i",{staticClass:"el-icon-message"}),n("span",[e._v("邮箱")]),n("span",[e._v(e._s(e.userInfo.email))])]),n("div",{staticClass:"username"},[n("i",{staticClass:"el-icon-bank-card"}),n("span",[e._v("用户名")]),n("span",[e._v(e._s(e.userInfo.userName))])]),n("div",{staticClass:"username"},[n("i",{staticClass:"el-icon-postcard"}),n("span",[e._v("账号ID")]),n("span",[e._v(e._s(e.userInfo.userId))])])])]),n("el-dialog",{attrs:{title:"修改密码",visible:e.changePasswordDialogVisible,width:"500px",center:""},on:{"update:visible":function(t){e.changePasswordDialogVisible=t},close:e.changePasswordDialogClosed}},[n("el-form",{ref:"changePasswordRef",attrs:{model:e.passwordForm,rules:e.changePasswordRules}},[n("el-form-item",{attrs:{prop:"oldPassword"}},[n("el-input",{attrs:{placeholder:"当前密码",type:"password"},model:{value:e.passwordForm.oldPassword,callback:function(t){e.$set(e.passwordForm,"oldPassword",t)},expression:"passwordForm.oldPassword"}})],1),n("el-form-item",{attrs:{prop:"newPassword1"}},[n("el-input",{attrs:{placeholder:"输入新密码",type:"password"},model:{value:e.passwordForm.newPassword1,callback:function(t){e.$set(e.passwordForm,"newPassword1",t)},expression:"passwordForm.newPassword1"}})],1),n("el-form-item",{attrs:{prop:"newPassword2"}},[n("el-input",{attrs:{placeholder:"确认新密码",type:"password"},model:{value:e.passwordForm.newPassword2,callback:function(t){e.$set(e.passwordForm,"newPassword2",t)},expression:"passwordForm.newPassword2"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.changePasswordDialogVisible=!1}}},[e._v("取消")]),n("el-button",{on:{click:e.changePassword}},[e._v("确定")])],1)],1)],1)],1)},De=[],_e={data:function(){var e=this,t=function(t,n,a){n!==e.passwordForm.newPassword1?a(new Error("两次输入密码不一致!")):a()};return{userInfo:{userId:"1222113",nickname:"张三342",userName:"WE谢谢",email:"111@qq.com",password:"",image:""},myImage:"",messageInfo:{messageNum:"",isHidden:!1},messageList:[],passwordForm:{oldPassword:"",newPassword1:"",newPassword2:""},changePasswordDialogVisible:!1,changePasswordRules:{oldPassword:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符",trigger:"blur"}],newPassword1:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符",trigger:"blur"}],newPassword2:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符",trigger:"blur"},{validator:t,trigger:"blur"}]},isSelf:!1}},created:function(){this.checkSelf(),this.getMessage(),this.getUserInfo()},methods:{checkSelf:function(){var e=window.location.hash;this.isSelf="#/profile"===e},readMessage:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=window.sessionStorage.getItem("token"),s=e.id,o={status:0},n.next=5,t.$http.patch("/message/"+s+"/?token="+a,o);case 5:r=n.sent,i=r.data,console.log(i),"成功"===i?(t.$message.success("消息已读"),t.getMessage()):t.$message.error(i);case 9:case"end":return n.stop()}}),n)})))()},agreeMessage:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.group,s=window.sessionStorage.getItem("token"),o={user_id:e.senduser,decision:!0},n.next=5,t.$http.put("/group/"+a+"/?token="+s,o);case 5:r=n.sent,i=r.data,"成功"===i?(t.$message.success("该用户已加入您的团队"),t.readMessage(e)):t.$message.err("加入失败");case 8:case"end":return n.stop()}}),n)})))()},refuseMessage:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.group,s=window.sessionStorage.getItem("token"),o={user_id:e.senduser,decision:!1},n.next=5,t.$http.put("/group/"+a+"/?token="+s,o);case 5:r=n.sent,i=r.data,"成功"===i?(t.$message.success("已拒绝此申请"),t.readMessage(e)):t.$message.err(i);case 8:case"end":return n.stop()}}),n)})))()},getMessage:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.messageList=[],e.messageInfo.messageNum="",n=window.sessionStorage.getItem("token"),t.next=5,e.$http.get("/message/?token="+n);case 5:a=t.sent,s=a.data,e.messageInfo.messageNum=s[0].count,e.messageList=s;case 9:case"end":return t.stop()}}),t)})))()},gotoProfile:function(){this.$router.push("/profile"),this.checkSelf(),this.getMessage(),this.getUserInfo()},gotoWelcome:function(){this.$router.push("/")},getHelp:function(){this.$router.push("/help")},goHome:function(){this.$router.push("/home")},logout:function(){window.sessionStorage.removeItem("token"),this.$router.push("/")},getUserInfo:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o,r,i,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=window.sessionStorage.getItem("token"),e.isSelf){t.next=19;break}return a=e.$route.params.id,t.next=5,e.$http.get("/user/"+a);case 5:return s=t.sent,o=s.data,e.userInfo.userId=o.id,e.userInfo.nickname=o.nickname,e.userInfo.userName=o.username,e.userInfo.email=o.email,e.userInfo.image=o.image,t.next=14,e.$http.get("/user/?token="+n);case 14:r=t.sent,i=r.data,e.myImage=i.image,t.next=31;break;case 19:return t.next=21,e.$http.get("/user/?token="+n);case 21:c=t.sent,l=c.data,e.userInfo.userId=l.id,e.userInfo.nickname=l.nickname,e.userInfo.userName=l.username,e.userInfo.email=l.email,e.oldNickname=l.nickname,e.userInfo.password=l.password,e.userInfo.image=l.image,e.myImage=l.image;case 31:case"end":return t.stop()}}),t)})))()},beforeAvatarUpload:function(e){var t=/^image\/(jpeg|png|jpg)$/.test(e.type),n=e.size/1024/1024<=4;if(t){if(n)return t&&n;this.$message.error("图片大小不能超过 4M")}else this.$message.error("仅支持jpg、png格式")},uploadSuccess:function(e,t,n){var a=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,s,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=window.sessionStorage.getItem("token"),s={image:e.url},t.next=4,a.$http.patch("/user/?token="+n,s);case 4:o=t.sent,r=o.data,"修改失败"===r?a.$message.error("修改失败"):(a.$message.success("上传成功"),a.getUserInfo());case 7:case"end":return t.stop()}}),t)})))()},uploadError:function(e,t){this.$message.error(e)},changeNickname:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=window.sessionStorage.getItem("token"),console.log(e.oldNickname),a={nickname:e.userInfo.nickname},t.next=5,e.$http.patch("/user/?token="+n,a);case 5:s=t.sent,o=s.data,"修改失败"===o?(e.$message.error(o),e.userInfo.nickname=e.oldNickname):(e.$message.success("修改昵称成功"),e.userInfo.nickname=o.nickname);case 8:case"end":return t.stop()}}),t)})))()},changePassword:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.changePasswordRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(n){var a,s,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:if(e.passwordForm.oldPassword===e.userInfo.password){t.next=7;break}return e.$message.error("原密码错误"),t.abrupt("return");case 7:if(e.passwordForm.oldPassword!==e.passwordForm.newPassword1){t.next=10;break}return e.$message.error("新密码与旧密码一致"),t.abrupt("return");case 10:return a=window.sessionStorage.getItem("token"),s={password:e.passwordForm.newPassword1},t.next=14,e.$http.patch("/user/?token="+a,s);case 14:o=t.sent,r=o.data,"修改失败"===r?e.$message.error(r):(e.$message.success("修改密码成功"),e.changePasswordDialogVisible=!1);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},changePasswordDialogClosed:function(){this.$refs.changePasswordRef.resetFields()}}},Ce=_e,Ae=(n("ebda"),Object(c["a"])(Ce,xe,De,!1,null,"b07b9fd0",null)),$e=Ae.exports,Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",[n("div",{staticClass:"welcomebtn",on:{click:e.goHome}},[n("div",{attrs:{id:"bars"}}),n("div",{attrs:{id:"bars"}}),n("div",{attrs:{id:"bars"}})]),n("div",{attrs:{id:"triangle-top-left"}}),n("div",{staticClass:"navbar"},[n("div",{staticClass:"item"},[n("el-popover",{attrs:{placement:"bottom",width:"260",trigger:"hover",title:"通知"}},[n("el-scrollbar",{staticStyle:{height:"360px"}},e._l(e.messageList,(function(t){return n("div",{key:t.id},[n("span",[e._v(e._s(t.content))]),n("div",[n("span",[e._v(e._s(t.createtime))]),2===t.category?n("div",[n("el-button",{attrs:{icon:"el-icon-check",circle:"",size:"mini"},on:{click:function(n){return e.agreeMessage(t)}}}),n("el-button",{attrs:{icon:"el-icon-close",circle:"",size:"mini"},on:{click:function(n){return e.refuseMessage(t)}}})],1):n("div",[n("el-button",{attrs:{icon:"el-icon-check",circle:"",size:"mini"},on:{click:function(n){return e.readMessage(t)}}})],1)])])})),0),n("el-badge",{attrs:{slot:"reference",value:e.messageInfo.messageNum,max:99,hidden:e.messageInfo.isHidden},slot:"reference"},[n("el-button",{attrs:{id:"bellbtn",icon:"el-icon-bell",circle:""},on:{click:e.getMessage}})],1)],1)],1),n("div",{staticClass:"icon-dropdown"},[n("el-dropdown",[n("el-button",{attrs:{id:"iconbtn",circle:""}},[n("img",{staticClass:"icon",attrs:{src:"http://123.57.67.128:8000"+e.image,alt:"用户头像"}})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(t){return e.gotoProfile(t)}}},[n("span",[e._v("账号设置")])]),n("el-dropdown-item",{nativeOn:{click:function(t){return e.gotoWelcome(t)}}},[n("span",[e._v("前往官网")])]),n("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(t){return e.logout(t)}}},[n("span",[e._v("退出登录")])])],1)],1)],1)]),n("div",{attrs:{id:"triangle-top-right"}})]),n("el-main",[n("h3",[e._v("帮助中心")]),n("div",{staticClass:"content"},[n("div",[n("h4",[e._v("# 如何查看和修改我的个人信息？")]),n("span",[e._v("登录后，将光标移至右上圆形头像处，在弹出的下拉框中选择“账号设置”即可访问个人页面。在个人页面中，您可以更改修改您的头像、昵称及密码。")])]),n("div",[n("h4",[e._v("# 如何设置或更改文档权限？")]),n("span",[e._v("在黑石文档中，您可以且仅可以设置由您所创建的文档权限。")]),n("h5",[e._v("方法一")]),n("span",[e._v("将光标移至工作台界面文件右侧的“更多选项”图标，在弹出的下拉框中选择“权限更改”即可更改文档权限。")]),n("h5",[e._v("方法二")]),n("span",[e._v("在文档编辑页中，点击“文档权限”按钮，即可更改文档权限。")])]),n("div",[n("h4",[e._v("# 如何在文档中上传图片？")]),n("span",[e._v("在文档编辑页中，点击文本编辑器右上“图片”图标，选择您想上传的图片即可。")])]),n("div",[n("h4",[e._v("# 黑石支持文档模板功能吗？")]),n("span",[e._v("黑石文档支持新建及选择模板功能。")]),n("p"),n("span",[e._v("在文档编辑页中，点击左上“保存为模板”按钮，您可以将当前文档中的内容存储为模板供下次使用；在当前有模板保存的情况下，点击左上“使用模板”按钮，并在弹窗中选择即可使用模板。")])]),n("div",[n("h4",[e._v("# 如何加入或创建一个团队？")]),n("span",[e._v("在工作台页面，点击左侧导航栏“团队空间”右侧的“加号（+）”，在出现的弹窗中即可选择加入或创建团队。")])]),n("div",[n("h4",[e._v("# 如何在我的团队中添加协作者？")]),n("span",[e._v("在目前版本的黑石中，并没有主动添加协作者的功能。")]),n("h5",[e._v("若您想加入一个团队")]),n("span",[e._v("请阅读上方“如何加入或创建一个团队？”帮助后，搜索并添加您想加入的团队，征求团队管理者认同后方可加入。")])]),n("div",[n("h4",[e._v("# 黑石支持实时共享协同文档吗？")]),n("span",[e._v("在目前版本的黑石中，并不支持实时共享功能。")]),n("p"),n("span",[e._v("黑石文档协作功能支持且仅支持一人在线编辑文档，当文档出现“正在编辑”提示时，您需要等待编辑者保存文档后，方可编辑该文档。")])])])]),n("el-footer",[n("div",{staticClass:"footer"},[n("span",[e._v("编写于")]),n("span",[e._v("黑石文档")])])])],1)},Re=[],Le={components:{},data:function(){return{image:"",messageInfo:{messageNum:"",isHidden:!1},messageList:[]}},created:function(){this.getMessage(),this.getImage()},methods:{getImage:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=window.sessionStorage.getItem("token"),t.next=3,e.$http.get("/user/?token="+n);case 3:a=t.sent,s=a.data,e.image=s.image;case 6:case"end":return t.stop()}}),t)})))()},readMessage:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=window.sessionStorage.getItem("token"),s=e.id,o={status:0},n.next=5,t.$http.patch("/message/"+s+"/?token="+a,o);case 5:r=n.sent,i=r.data,"成功"===i?(t.$message.success("消息已读"),t.getMessage()):t.$message.error(i);case 8:case"end":return n.stop()}}),n)})))()},agreeMessage:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.group,s=window.sessionStorage.getItem("token"),o={user_id:e.senduser,decision:!0},n.next=5,t.$http.put("/group/"+a+"/?token="+s,o);case 5:r=n.sent,i=r.data,"成功"===i?(t.$message.success("该用户已加入您的团队"),t.readMessage(e)):t.$message.err(i);case 8:case"end":return n.stop()}}),n)})))()},refuseMessage:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var a,s,o,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.group,s=window.sessionStorage.getItem("token"),o={user_id:e.senduser,decision:!1},n.next=5,t.$http.put("/group/"+a+"/?token="+s,o);case 5:r=n.sent,i=r.data,"成功"===i?(t.$message.success("已拒绝此申请"),t.readMessage(e)):t.$message.err(i);case 8:case"end":return n.stop()}}),n)})))()},getMessage:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.messageList=[],e.messageInfo.messageNum="",n=window.sessionStorage.getItem("token"),t.next=5,e.$http.get("/message/?token="+n);case 5:a=t.sent,s=a.data,e.messageInfo.messageNum=s[0].count,e.messageList=s;case 9:case"end":return t.stop()}}),t)})))()},gotoProfile:function(){this.$router.push("/profile")},gotoWelcome:function(){this.$router.push("/")},goHome:function(){this.$router.push("/home")},logout:function(){window.sessionStorage.removeItem("token"),this.$router.push("/")}}},Fe=Le,ye=(n("870e"),Object(c["a"])(Fe,Se,Re,!1,null,"be20e794",null)),Oe=ye.exports;a["default"].use(d["a"]);var je=[{path:"*",redirect:"/"},{path:"/",redirect:"/welcome"},{path:"/welcome",meta:{title:"黑石文档"},component:L},{path:"/login",meta:{title:"登录页-黑石文档"},component:w},{path:"/register",meta:{title:"注册页-黑石文档"},component:_},{path:"/profile",meta:{title:"个人信息页-黑石文档"},component:$e},{path:"/profile/:id",meta:{title:"用户信息页-黑石文档"},component:$e},{path:"/home",component:E,redirect:"/dashboard",children:[{path:"/dashboard",meta:{title:"工作台 - 黑石文档"},component:P},{path:"/desktop",meta:{title:"我的桌面 - 黑石文档"},component:G},{path:"/trash",meta:{title:"回收站 - 黑石文档"},component:ee},{path:"/space/:id",meta:{title:"团队空间 - 黑石文档"},component:Ie}]},{path:"/doc/:id",meta:{title:"文档编辑页 - 黑石文档"},component:he},{path:"/help",meta:{title:"帮助中心-黑石文档"},component:Oe}],Te=new d["a"]({routes:je});Te.beforeEach((function(e,t,n){if("/login"===e.path)return n();if("/register"===e.path)return n();if("/welcome"===e.path)return n();var a=window.sessionStorage.getItem("token");if(!a)return n("/login");n()}));var Ee=Te,Ne=n("5c96");a["default"].use(Ne["Button"]),a["default"].use(Ne["Form"]),a["default"].use(Ne["FormItem"]),a["default"].use(Ne["Input"]),a["default"].use(Ne["Input"]),a["default"].use(Ne["Container"]),a["default"].use(Ne["Header"]),a["default"].use(Ne["Footer"]),a["default"].use(Ne["Aside"]),a["default"].use(Ne["Main"]),a["default"].use(Ne["Avatar"]),a["default"].use(Ne["Menu"]),a["default"].use(Ne["Submenu"]),a["default"].use(Ne["MenuItemGroup"]),a["default"].use(Ne["MenuItem"]),a["default"].use(Ne["Divider"]),a["default"].use(Ne["Dropdown"]),a["default"].use(Ne["DropdownItem"]),a["default"].use(Ne["DropdownMenu"]),a["default"].use(Ne["Badge"]),a["default"].use(Ne["ButtonGroup"]),a["default"].use(Ne["Card"]),a["default"].use(Ne["Popover"]),a["default"].use(Ne["Table"]),a["default"].use(Ne["TableColumn"]),a["default"].use(Ne["Link"]),a["default"].use(Ne["Pagination"]),a["default"].use(Ne["Breadcrumb"]),a["default"].use(Ne["BreadcrumbItem"]),a["default"].use(Ne["Dialog"]),a["default"].use(Ne["Tabs"]),a["default"].use(Ne["TabPane"]),a["default"].use(Ne["Tooltip"]),a["default"].use(Ne["Scrollbar"]),a["default"].use(Ne["Upload"]),a["default"].use(Ne["Select"]),a["default"].use(Ne["Option"]),a["default"].prototype.$message=Ne["Message"];n("a753"),n("8096"),n("14e1"),n("aede");var Me=n("bc3a"),Ve=n.n(Me);Ve.a.defaults.baseURL="http://123.57.67.128:8000",a["default"].prototype.$http=Ve.a,a["default"].config.productionTip=!1,a["default"].use(se.a),Ee.beforeEach((function(e,t,n){e.meta.title&&(document.title=e.meta.title),n()})),new a["default"]({router:Ee,render:function(e){return e(u)}}).$mount("#app")},"63b5":function(e,t,n){"use strict";var a=n("a0c5"),s=n.n(a);s.a},"65df":function(e,t,n){e.exports=n.p+"img/rg_backsrc.b26ad266.png"},"79f6":function(e,t,n){"use strict";var a=n("c24a"),s=n.n(a);s.a},"84ca":function(e,t,n){e.exports=n.p+"img/name3.e71513e4.png"},"85ec":function(e,t,n){},"870e":function(e,t,n){"use strict";var a=n("11ec"),s=n.n(a);s.a},"88d7":function(e,t,n){},"8ae3":function(e,t,n){},"8b71":function(e,t,n){"use strict";var a=n("88d7"),s=n.n(a);s.a},"960b":function(e,t,n){},"9d28":function(e,t,n){},a0c5:function(e,t,n){},a85b:function(e,t,n){e.exports=n.p+"img/shot1.4b6f51a9.png"},ad64:function(e,t,n){e.exports=n.p+"img/wl_backsrc.35967c59.png"},aede:function(e,t,n){},b0c3:function(e,t,n){"use strict";var a=n("8ae3"),s=n.n(a);s.a},b19d:function(e,t,n){},b482:function(e,t,n){e.exports=n.p+"img/shot2.0c2a66a7.png"},b8fc:function(e,t,n){"use strict";var a=n("b19d"),s=n.n(a);s.a},bd90:function(e,t,n){"use strict";var a=n("e3e6"),s=n.n(a);s.a},c24a:function(e,t,n){},c2b0:function(e,t,n){e.exports=n.p+"img/lock.cd947208.png"},c6f2:function(e,t,n){},c843:function(e,t,n){e.exports=n.p+"img/name2.ca2a08ac.png"},d431:function(e,t,n){},e3e6:function(e,t,n){},e9a4:function(e,t,n){"use strict";var a=n("d431"),s=n.n(a);s.a},ea9d:function(e,t,n){},ebda:function(e,t,n){"use strict";var a=n("ea9d"),s=n.n(a);s.a},fa64:function(e,t,n){e.exports=n.p+"img/doc.2f28f3ca.png"}});
//# sourceMappingURL=app.971a1162.js.map